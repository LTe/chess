/*! For license information please see 5744.d5a9b884.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5744],{861:function(e,t,r){"use strict";r.d(t,{FT:function(){return s}});var n=r(7294),o=r(5893);const i=["as","disabled"];function s({tagName:e,disabled:t,href:r,target:n,rel:o,onClick:i,tabIndex:s=0,type:a}){e||(e=null!=r||null!=n||null!=o?"a":"button");const c={tagName:e};if("button"===e)return[{type:a||"button",disabled:t},c];const l=n=>{(t||"a"===e&&function(e){return!e||"#"===e.trim()}(r))&&n.preventDefault(),t?n.stopPropagation():null==i||i(n)};return[{role:"button",disabled:void 0,tabIndex:t?void 0:s,href:"a"===e&&t?void 0:r,target:"a"===e?n:void 0,"aria-disabled":t||void 0,rel:"a"===e?o:void 0,onClick:l,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),l(e))}},c]}const a=n.forwardRef((e,t)=>{let{as:r,disabled:n}=e,a=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,i);const[c,{tagName:l}]=s(Object.assign({tagName:r,disabled:n},a));return(0,o.jsx)(l,Object.assign({},a,c,{ref:t}))});a.displayName="Button",t.ZP=a},8437:function(e,t,r){var n,o=function(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",r=["1-0","0-1","1/2-1/2","*"],n={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],s=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],a={p:0,n:1,b:2,r:3,q:4,k:5},c={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},l={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},u={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},d={w:[{square:u.a1,flag:l.QSIDE_CASTLE},{square:u.h1,flag:l.KSIDE_CASTLE}],b:[{square:u.a8,flag:l.QSIDE_CASTLE},{square:u.h8,flag:l.KSIDE_CASTLE}]},p=new Array(128),f={w:-1,b:-1},v="w",g={w:0,b:0},h=-1,b=0,m=1,y=[],w={};function P(e){void 0===e&&(e=!1),p=new Array(128),f={w:-1,b:-1},v="w",g={w:0,b:0},h=-1,b=0,m=1,y=[],e||(w={}),A(E())}function k(){C(t)}function C(e,t){void 0===t&&(t=!1);var r=e.split(/\s+/),n=r[0],o=0;if(!S(e).valid)return!1;P(t);for(var i=0;i<n.length;i++){var s=n.charAt(i);if("/"===s)o+=8;else if(-1!=="0123456789".indexOf(s))o+=parseInt(s,10);else{var a=s<"a"?"w":"b";O({type:s.toLowerCase(),color:a},z(o)),o++}}return v=r[1],r[2].indexOf("K")>-1&&(g.w|=l.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(g.w|=l.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(g.b|=l.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(g.b|=l.QSIDE_CASTLE),h="-"===r[3]?-1:u[r[3]],b=parseInt(r[4],10),m=parseInt(r[5],10),A(E()),!0}function S(e){var t="No errors.",r="FEN string must contain six space-delimited fields.",n="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",s="3rd field (castling availability) is invalid.",a="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",p="Illegal en-passant square",f=e.split(/\s+/);if(6!==f.length)return{valid:!1,error_number:1,error:r};if(isNaN(f[5])||parseInt(f[5],10)<=0)return{valid:!1,error_number:2,error:n};if(isNaN(f[4])||parseInt(f[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(f[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(f[2]))return{valid:!1,error_number:5,error:s};if(!/^(w|b)$/.test(f[1]))return{valid:!1,error_number:6,error:a};var v=f[0].split("/");if(8!==v.length)return{valid:!1,error_number:7,error:c};for(var g=0;g<v.length;g++){for(var h=0,b=!1,m=0;m<v[g].length;m++)if(isNaN(v[g][m])){if(!/^[prnbqkPRNBQK]$/.test(v[g][m]))return{valid:!1,error_number:9,error:u};h+=1,b=!1}else{if(b)return{valid:!1,error_number:8,error:l};h+=parseInt(v[g][m],10),b=!0}if(8!==h)return{valid:!1,error_number:10,error:d}}return"3"==f[3][1]&&"w"==f[1]||"6"==f[3][1]&&"b"==f[1]?{valid:!1,error_number:11,error:p}:{valid:!0,error_number:0,error:t}}function E(){for(var e=0,t="",r=u.a8;r<=u.h1;r++){if(null==p[r])e++;else{e>0&&(t+=e,e=0);var n=p[r].color,o=p[r].type;t+="w"===n?o.toUpperCase():o.toLowerCase()}r+1&136&&(e>0&&(t+=e),r!==u.h1&&(t+="/"),e=0,r+=8)}var i="";g.w&l.KSIDE_CASTLE&&(i+="K"),g.w&l.QSIDE_CASTLE&&(i+="Q"),g.b&l.KSIDE_CASTLE&&(i+="k"),g.b&l.QSIDE_CASTLE&&(i+="q"),i=i||"-";var s=-1===h?"-":z(h);return[t,v,i,s,b,m].join(" ")}function _(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(w[e[t]]=e[t+1]);return w}function A(e){y.length>0||(e!==t?(w.SetUp="1",w.FEN=e):(delete w.SetUp,delete w.FEN))}function x(e){var t=p[u[e]];return t?{type:t.type,color:t.color}:null}function O(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in u))return!1;var r=u[t];return("k"!=e.type||-1==f[e.color]||f[e.color]==r)&&(p[r]={type:e.type,color:e.color},"k"===e.type&&(f[e.color]=r),A(E()),!0)}function N(e,t,r,n,o){var i={color:v,from:t,to:r,flags:n,piece:e[t].type};return o&&(i.flags|=l.PROMOTION,i.promotion=o),e[r]?i.captured=e[r].type:n&l.EP_CAPTURE&&(i.captured="p"),i}function M(e){function t(e,t,r,n,o){if("p"!==e[r].type||0!==W(n)&&7!==W(n))t.push(N(e,r,n,o));else for(var i=["q","r","b","n"],s=0,a=i.length;s<a;s++)t.push(N(e,r,n,o,i[s]))}var r=[],i=v,s=Z(i),a={b:1,w:6},c=u.a8,d=u.h1,b=!1,m=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in u))return[];c=d=u[e.square],b=!0}for(var y=c;y<=d;y++)if(136&y)y+=7;else{var w=p[y];if(null!=w&&w.color===i)if("p"===w.type){var P=y+n[i][0];if(null==p[P]){t(p,r,y,P,l.NORMAL);P=y+n[i][1];a[i]===W(y)&&null==p[P]&&t(p,r,y,P,l.BIG_PAWN)}for(k=2;k<4;k++){136&(P=y+n[i][k])||(null!=p[P]&&p[P].color===s?t(p,r,y,P,l.CAPTURE):P===h&&t(p,r,y,h,l.EP_CAPTURE))}}else for(var k=0,C=o[w.type].length;k<C;k++){var S=o[w.type][k];for(P=y;!(136&(P+=S));){if(null!=p[P]){if(p[P].color===i)break;t(p,r,y,P,l.CAPTURE);break}if(t(p,r,y,P,l.NORMAL),"n"===w.type||"k"===w.type)break}}}if(!b||d===f[i]){if(g[i]&l.KSIDE_CASTLE){var E=(_=f[i])+2;null!=p[_+1]||null!=p[E]||I(s,f[i])||I(s,_+1)||I(s,E)||t(p,r,f[i],E,l.KSIDE_CASTLE)}if(g[i]&l.QSIDE_CASTLE){var _;E=(_=f[i])-2;null!=p[_-1]||null!=p[_-2]||null!=p[_-3]||I(s,f[i])||I(s,_-1)||I(s,E)||t(p,r,f[i],E,l.QSIDE_CASTLE)}}if(!m)return r;var A=[];for(y=0,C=r.length;y<C;y++)U(r[y]),R(i)||A.push(r[y]),F();return A}function T(e,t){var r="";if(e.flags&l.KSIDE_CASTLE)r="O-O";else if(e.flags&l.QSIDE_CASTLE)r="O-O-O";else{var n=function(e,t){for(var r=M({legal:!t}),n=e.from,o=e.to,i=e.piece,s=0,a=0,c=0,l=0,u=r.length;l<u;l++){var d=r[l].from,p=r[l].to,f=r[l].piece;i===f&&n!==d&&o===p&&(s++,W(n)===W(d)&&a++,Q(n)===Q(d)&&c++)}if(s>0)return a>0&&c>0?z(n):c>0?z(n).charAt(1):z(n).charAt(0);return""}(e,t);"p"!==e.piece&&(r+=e.piece.toUpperCase()+n),e.flags&(l.CAPTURE|l.EP_CAPTURE)&&("p"===e.piece&&(r+=z(e.from)[0]),r+="x"),r+=z(e.to),e.flags&l.PROMOTION&&(r+="="+e.promotion.toUpperCase())}return U(e),D()&&(K()?r+="#":r+="+"),F(),r}function j(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function I(e,t){for(var r=u.a8;r<=u.h1;r++)if(136&r)r+=7;else if(null!=p[r]&&p[r].color===e){var n=p[r],o=r-t,c=o+119;if(i[c]&1<<a[n.type]){if("p"===n.type){if(o>0){if("w"===n.color)return!0}else if("b"===n.color)return!0;continue}if("n"===n.type||"k"===n.type)return!0;for(var l=s[c],d=r+l,f=!1;d!==t;){if(null!=p[d]){f=!0;break}d+=l}if(!f)return!0}}return!1}function R(e){return I(Z(e),f[e])}function D(){return R(v)}function K(){return D()&&0===M().length}function q(){return!D()&&0===M().length}function L(){for(var e={},t=[],r=0,n=0,o=u.a8;o<=u.h1;o++)if(n=(n+1)%2,136&o)o+=7;else{var i=p[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&t.push(n),r++)}if(2===r)return!0;if(3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){var s=0,a=t.length;for(o=0;o<a;o++)s+=t[o];if(0===s||s===a)return!0}return!1}function $(){for(var e=[],t={},r=!1;;){var n=F();if(!n)break;e.push(n)}for(;;){var o=E().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(r=!0),!e.length)break;U(e.pop())}return r}function U(e){var t=v,r=Z(t);if(function(e){y.push({move:e,kings:{b:f.b,w:f.w},turn:v,castling:{b:g.b,w:g.w},ep_square:h,half_moves:b,move_number:m})}(e),p[e.to]=p[e.from],p[e.from]=null,e.flags&l.EP_CAPTURE&&("b"===v?p[e.to-16]=null:p[e.to+16]=null),e.flags&l.PROMOTION&&(p[e.to]={type:e.promotion,color:t}),"k"===p[e.to].type){if(f[p[e.to].color]=e.to,e.flags&l.KSIDE_CASTLE){var n=e.to-1,o=e.to+1;p[n]=p[o],p[o]=null}else if(e.flags&l.QSIDE_CASTLE){n=e.to+1,o=e.to-2;p[n]=p[o],p[o]=null}g[t]=""}if(g[t])for(var i=0,s=d[t].length;i<s;i++)if(e.from===d[t][i].square&&g[t]&d[t][i].flag){g[t]^=d[t][i].flag;break}if(g[r])for(i=0,s=d[r].length;i<s;i++)if(e.to===d[r][i].square&&g[r]&d[r][i].flag){g[r]^=d[r][i].flag;break}h=e.flags&l.BIG_PAWN?"b"===v?e.to-16:e.to+16:-1,"p"===e.piece||e.flags&(l.CAPTURE|l.EP_CAPTURE)?b=0:b++,"b"===v&&m++,v=Z(v)}function F(){var e=y.pop();if(null==e)return null;var t=e.move;f=e.kings,v=e.turn,g=e.castling,h=e.ep_square,b=e.half_moves,m=e.move_number;var r,n,o=v,i=Z(v);if(p[t.from]=p[t.to],p[t.from].type=t.piece,p[t.to]=null,t.flags&l.CAPTURE)p[t.to]={type:t.captured,color:i};else if(t.flags&l.EP_CAPTURE){var s;s="b"===o?t.to-16:t.to+16,p[s]={type:"p",color:i}}t.flags&(l.KSIDE_CASTLE|l.QSIDE_CASTLE)&&(t.flags&l.KSIDE_CASTLE?(r=t.to+1,n=t.to-1):t.flags&l.QSIDE_CASTLE&&(r=t.to-2,n=t.to+1),p[r]=p[n],p[n]=null);return t}function B(e,t){var r=j(e);if(t){var n=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(n)var o=n[1],i=n[2],s=n[3],a=n[4]}for(var c=M(),l=0,d=c.length;l<d;l++){if(r===j(T(c[l]))||t&&r===j(T(c[l],!0)))return c[l];if(n&&(!o||o.toLowerCase()==c[l].piece)&&u[i]==c[l].from&&u[s]==c[l].to&&(!a||a.toLowerCase()==c[l].promotion))return c[l]}return null}function W(e){return e>>4}function Q(e){return 15&e}function z(e){var t=Q(e),r=W(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function Z(e){return"w"===e?"b":"w"}function G(e){var t=function e(t){var r=t instanceof Array?[]:{};for(var n in t)r[n]="object"==typeof n?e(t[n]):t[n];return r}(e);t.san=T(t,!1),t.to=z(t.to),t.from=z(t.from);var r="";for(var n in l)l[n]&t.flags&&(r+=c[n]);return t.flags=r,t}function H(e){return e.replace(/^\s+|\s+$/g,"")}return C(void 0===e?t:e),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var e=[],t=u.a8;t<=u.h1;t++)136&t?t+=7:e.push(z(t));return e}(),FLAGS:c,load:function(e){return C(e)},reset:function(){return k()},moves:function(e){for(var t=M(e),r=[],n=0,o=t.length;n<o;n++)void 0!==e&&"verbose"in e&&e.verbose?r.push(G(t[n])):r.push(T(t[n],!1));return r},in_check:function(){return D()},in_checkmate:function(){return K()},in_stalemate:function(){return q()},in_draw:function(){return b>=100||q()||L()||$()},insufficient_material:function(){return L()},in_threefold_repetition:function(){return $()},game_over:function(){return b>=100||K()||q()||L()||$()},validate_fen:function(e){return S(e)},fen:function(){return E()},board:function(){for(var e=[],t=[],r=u.a8;r<=u.h1;r++)null==p[r]?t.push(null):t.push({type:p[r].type,color:p[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",r="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,n=[],o=!1;for(var i in w)n.push("["+i+' "'+w[i]+'"]'+t),o=!0;o&&y.length&&n.push(t);for(var s=[];y.length>0;)s.push(F());for(var a=[],c="";s.length>0;){var l=s.pop();y.length||"b"!==l.color?"w"===l.color&&(c.length&&a.push(c),c=m+"."):c=m+". ...",c=c+" "+T(l,!1),U(l)}if(c.length&&a.push(c),void 0!==w.Result&&a.push(w.Result),0===r)return n.join("")+a.join(" ");var u=0;for(i=0;i<a.length;i++)u+a[i].length>r&&0!==i?(" "===n[n.length-1]&&n.pop(),n.push(t),u=0):0!==i&&(n.push(" "),u++),n.push(a[i]),u+=a[i].length;return n.join("")},load_pgn:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy;function o(e){return e.replace(/\\/g,"\\")}var i="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",s=new RegExp("^(\\[((?:"+o(i)+")|.)*\\])(?:"+o(i)+"){2}"),a=s.test(e)?s.exec(e)[1]:"";k();var c=function(e,t){for(var r="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",n={},i=e.split(new RegExp(o(r))),s="",a="",c=0;c<i.length;c++)s=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),a=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),H(s).length>0&&(n[s]=a);return n}(a,t);for(var l in c)_([l,c[l]]);if(!("1"!==c.SetUp||"FEN"in c&&C(c.FEN,!0)))return!1;var u=e.replace(a,"").replace(new RegExp(o(i),"g")," ");u=u.replace(/(\{[^}]+\})+?/g,"");for(var d=/(\([^\(\)]+\))+?/g;d.test(u);)u=u.replace(d,"");var p=H(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));p=p.join(",").replace(/,,+/g,",").split(",");for(var f="",v=0;v<p.length-1;v++){if(null==(f=B(p[v],n)))return!1;U(f)}if(f=p[p.length-1],r.indexOf(f)>-1)(function(e){for(var t in e)return!0;return!1})(w)&&void 0===w.Result&&_(["Result",f]);else{if(null==(f=B(f,n)))return!1;U(f)}return!0},header:function(){return _(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=u.a8;t<=u.h1;t++){if(0===Q(t)&&(e+=" "+"87654321"[W(t)]+" |"),null==p[t])e+=" . ";else{var r=p[t].type;e+=" "+("w"===p[t].color?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return v},move:function(e,t){var r=void 0!==t&&"sloppy"in t&&t.sloppy,n=null;if("string"==typeof e)n=B(e,r);else if("object"==typeof e)for(var o=M(),i=0,s=o.length;i<s;i++)if(e.from===z(o[i].from)&&e.to===z(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){n=o[i];break}if(!n)return null;var a=G(n);return U(n),a},undo:function(){var e=F();return e?G(e):null},clear:function(){return P()},put:function(e,t){return O(e,t)},get:function(e){return x(e)},remove:function(e){return function(e){var t=x(e);return p[u[e]]=null,t&&"k"===t.type&&(f[t.color]=-1),A(E()),t}(e)},perft:function(e){return function e(t){for(var r=M({legal:!1}),n=0,o=v,i=0,s=r.length;i<s;i++){if(U(r[i]),!R(o))if(t-1>0)n+=e(t-1);else n++;F()}return n}(e)},square_color:function(e){if(e in u){var t=u[e];return(W(t)+Q(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],r=[],n=(void 0!==e&&"verbose"in e&&e.verbose);y.length>0;)t.push(F());for(;t.length>0;){var o=t.pop();n?r.push(G(o)):r.push(T(o)),U(o)}return r}}};t.Chess=o,void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},4184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var a in r)n.call(r,a)&&r[a]&&e.push(a);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},1143:function(e){"use strict";e.exports=function(e,t,r,n,o,i,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,i,s,a],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},5005:function(e,t,r){"use strict";var n=r(4184),o=r.n(n),i=r(7294),s=r(861),a=r(6792),c=r(5893);const l=i.forwardRef(({as:e,bsPrefix:t,variant:r,size:n,active:i,className:l,...u},d)=>{const p=(0,a.vE)(t,"btn"),[f,{tagName:v}]=(0,s.FT)({tagName:e,...u}),g=v;return(0,c.jsx)(g,{...u,...f,ref:d,className:o()(l,p,i&&"active",r&&`${p}-${r}`,n&&`${p}-${n}`,u.href&&u.disabled&&"disabled")})});l.displayName="Button",l.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=l},1377:function(e,t,r){"use strict";const n=r(7294).createContext({});t.Z=n},6789:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(4184),o=r.n(n),i=r(7294),s=(r(2473),r(5697)),a=r.n(s),c=r(5893);const l={type:a().string,tooltip:a().bool,as:a().elementType},u=i.forwardRef(({as:e="div",className:t,type:r="valid",tooltip:n=!1,...i},s)=>(0,c.jsx)(e,{...i,ref:s,className:o()(t,`${r}-${n?"tooltip":"feedback"}`)}));u.displayName="Feedback",u.propTypes=l;var d=u,p=r(1377),f=r(6792);const v=i.forwardRef(({bsPrefix:e,type:t,size:r,htmlSize:n,id:s,className:a,isValid:l=!1,isInvalid:u=!1,plaintext:d,readOnly:v,as:g="input",...h},b)=>{const{controlId:m}=(0,i.useContext)(p.Z);let y;return e=(0,f.vE)(e,"form-control"),y=d?{[e+"-plaintext"]:!0}:{[e]:!0,[`${e}-${r}`]:r},(0,c.jsx)(g,{...h,type:t,size:n,ref:b,readOnly:v,id:s||m,className:o()(a,y,l&&"is-valid",u&&"is-invalid","color"===t&&e+"-color")})});v.displayName="FormControl";var g=Object.assign(v,{Feedback:d})},8664:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(4184),o=r.n(n),i=r(7294),s=/-(.)/g;var a=r(6792),c=r(5893);const l=e=>{return e[0].toUpperCase()+(t=e,t.replace(s,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var u=r(1377);const d=i.forwardRef(({id:e,bsPrefix:t,className:r,type:n="checkbox",isValid:s=!1,isInvalid:l=!1,as:d="input",...p},f)=>{const{controlId:v}=(0,i.useContext)(u.Z);return t=(0,a.vE)(t,"form-check-input"),(0,c.jsx)(d,{...p,ref:f,type:n,id:e||v,className:o()(r,t,s&&"is-valid",l&&"is-invalid")})});d.displayName="FormCheckInput";var p=d;const f=i.createContext(null);f.displayName="InputGroupContext";var v=f;const g=function(e,{displayName:t=l(e),Component:r,defaultProps:n}={}){const s=i.forwardRef(({className:t,bsPrefix:n,as:i=r||"div",...s},l)=>{const u=(0,a.vE)(n,e);return(0,c.jsx)(i,{ref:l,className:o()(t,u),...s})});return s.defaultProps=n,s.displayName=t,s}("input-group-text",{Component:"span"}),h=i.forwardRef(({bsPrefix:e,size:t,hasValidation:r,className:n,as:s="div",...l},u)=>{e=(0,a.vE)(e,"input-group");const d=(0,i.useMemo)(()=>({}),[]);return(0,c.jsx)(v.Provider,{value:d,children:(0,c.jsx)(s,{ref:u,...l,className:o()(n,e,t&&`${e}-${t}`,r&&"has-validation")})})});h.displayName="InputGroup";var b=Object.assign(h,{Text:g,Radio:e=>(0,c.jsx)(g,{children:(0,c.jsx)(p,{type:"radio",...e})}),Checkbox:e=>(0,c.jsx)(g,{children:(0,c.jsx)(p,{type:"checkbox",...e})})})},8181:function(e,t,r){"use strict";r.d(t,{Z:function(){return $}});var n=r(4184),o=r.n(n),i=r(7294),s=(r(2473),r(7462)),a=r(3366);r(1143);function c(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function l(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function u(e,t){return Object.keys(t).reduce((function(r,n){var o,u=r,d=u[c(n)],p=u[n],f=(0,a.Z)(u,[c(n),n].map(l)),v=t[n],g=function(e,t,r){var n=(0,i.useRef)(void 0!==e),o=(0,i.useState)(t),s=o[0],a=o[1],c=void 0!==e,l=n.current;return n.current=c,!c&&l&&s!==t&&a(t),[c?e:s,(0,i.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];r&&r.apply(void 0,[e].concat(n)),a(e)}),[r])]}(p,d,e[v]),h=g[0],b=g[1];return(0,s.Z)({},f,((o={})[n]=h,o[v]=b,o))}),e)}function d(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function p(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function f(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}d.__suppressDeprecationWarning=!0,p.__suppressDeprecationWarning=!0,f.__suppressDeprecationWarning=!0;var v=Function.prototype.bind.call(Function.prototype.call,[].slice);var g=function(e){return e&&"function"!=typeof e?function(t){e.current=t}:e};var h=function(e,t){return(0,i.useMemo)((function(){return function(e,t){var r=g(e),n=g(t);return function(e){r&&r(e),n&&n(e)}}(e,t)}),[e,t])};const b=i.createContext(null);b.displayName="NavContext";var m=b;const y=(e,t=null)=>null!=e?String(e):t||null;var w=i.createContext(null);var P=i.createContext(null);function k(e){return"data-rr-ui-"+e}var C=function(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e}),[e]),t};var S=r(861),E=r(5893);const _=["as","active","eventKey"];function A({key:e,onClick:t,active:r,id:n,role:o,disabled:s}){const a=(0,i.useContext)(w),c=(0,i.useContext)(m);let l=r;const u={role:o};if(c){o||"tablist"!==c.role||(u.role="tab");const t=c.getControllerId(null!=e?e:null),i=c.getControlledId(null!=e?e:null);u[k("event-key")]=e,u.id=t||n,u["aria-controls"]=i,l=null==r&&null!=e?c.activeKey===e:r}var d;return"tab"===u.role&&(s&&(u.tabIndex=-1,u["aria-disabled"]=!0),l?u["aria-selected"]=l:u.tabIndex=-1),u.onClick=(d=C(r=>{s||(null==t||t(r),null!=e&&a&&!r.isPropagationStopped()&&a(e,r))}),(0,i.useCallback)((function(){return d.current&&d.current.apply(d,arguments)}),[d])),[u,{isActive:l}]}const x=i.forwardRef((e,t)=>{let{as:r=S.ZP,active:n,eventKey:o}=e,i=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,_);const[s,a]=A(Object.assign({key:y(o,i.href),active:n},i));return s[k("active")]=a.isActive,(0,E.jsx)(r,Object.assign({},i,s,{ref:t}))});x.displayName="NavItem";var O=x;const N=["as","onSelect","activeKey","role","onKeyDown"];const M=()=>{},T=k("event-key"),j=i.forwardRef((e,t)=>{let{as:r="div",onSelect:n,activeKey:o,role:s,onKeyDown:a}=e,c=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,N);const l=(0,i.useReducer)((function(e){return!e}),!1)[1],u=(0,i.useRef)(!1),d=(0,i.useContext)(w),p=(0,i.useContext)(P);let f,g;p&&(s=s||"tablist",o=p.activeKey,f=p.getControlledId,g=p.getControllerId);const b=(0,i.useRef)(null),k=e=>{const t=b.current;if(!t)return null;const r=(n=`[${T}]:not([aria-disabled=true])`,v(t.querySelectorAll(n)));var n;const o=t.querySelector("[aria-selected=true]");if(!o)return null;const i=r.indexOf(o);if(-1===i)return null;let s=i+e;return s>=r.length&&(s=0),s<0&&(s=r.length-1),r[s]},C=(e,t)=>{null!=e&&(null==n||n(e,t),null==d||d(e,t))};(0,i.useEffect)(()=>{if(b.current&&u.current){const e=b.current.querySelector(`[${T}][aria-selected=true]`);null==e||e.focus()}u.current=!1});const S=h(t,b);return(0,E.jsx)(w.Provider,{value:C,children:(0,E.jsx)(m.Provider,{value:{role:s,activeKey:y(o),getControlledId:f||M,getControllerId:g||M},children:(0,E.jsx)(r,Object.assign({},c,{onKeyDown:e=>{if(null==a||a(e),!p)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=k(-1);break;case"ArrowRight":case"ArrowDown":t=k(1);break;default:return}var r;t&&(e.preventDefault(),C(t.dataset[(r="EventKey","rrUi"+r)]||null,e),u.current=!0,l())},ref:S,role:s}))})})});j.displayName="Nav";var I=Object.assign(j,{Item:O}),R=r(6792);var D=function(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e}),[e]),t};const K=i.forwardRef(({bsPrefix:e,active:t,disabled:r,eventKey:n,className:s,variant:a,action:c,as:l,...u},d)=>{e=(0,R.vE)(e,"list-group-item");const[p,f]=A({key:y(n,u.href),active:t,...u}),v=function(e){var t=D(e);return(0,i.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}(e=>{if(r)return e.preventDefault(),void e.stopPropagation();p.onClick(e)});r&&void 0===u.tabIndex&&(u.tabIndex=-1,u["aria-disabled"]=!0);const g=l||(c?u.href?"a":"button":"div");return(0,E.jsx)(g,{ref:d,...u,...p,onClick:v,className:o()(s,e,f.isActive&&"active",r&&"disabled",a&&`${e}-${a}`,c&&e+"-action")})});K.displayName="ListGroupItem";var q=K;const L=i.forwardRef((e,t)=>{const{className:r,bsPrefix:n,variant:i,horizontal:s,numbered:a,as:c="div",...l}=u(e,{activeKey:"onSelect"}),d=(0,R.vE)(n,"list-group");let p;return s&&(p=!0===s?"horizontal":"horizontal-"+s),(0,E.jsx)(I,{ref:t,...l,as:c,className:o()(r,d,i&&`${d}-${i}`,p&&`${d}-${p}`,a&&d+"-numbered")})});L.displayName="ListGroup";var $=Object.assign(L,{Item:q})},6792:function(e,t,r){"use strict";r.d(t,{vE:function(){return a}});var n=r(7294);r(5893);const o=n.createContext({prefixes:{}}),{Consumer:i,Provider:s}=o;function a(e,t){const{prefixes:r}=(0,n.useContext)(o);return e||r[t]||t}},8837:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7294),o=r(5697),i=r.n(o),s=r(1191);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.buildConfigFromProps=function(e){var t={events:{}};return Object.keys(o.propTypes).forEach((function(r){var n=e[r];if(void 0!==n){var o=r.match(/^on([A-Z]\S*)/);o?t.events[o[1].toLowerCase()]=n:t[r]=n}})),t},i.componentDidMount=function(){this.cg=(0,s.H)(this.el,this.buildConfigFromProps(this.props))},i.componentWillReceiveProps=function(e){this.cg.set(this.buildConfigFromProps(e))},i.componentWillUnmount=function(){this.cg.destroy()},i.render=function(){var e=this,t={style:a({},this.props.style)};return this.props.width&&(t.style.width=this.props.width),this.props.height&&(t.style.height=this.props.height),n.createElement("div",a({ref:function(t){return e.el=t}},t))},o}(n.Component);c(l,"propTypes",{width:i().oneOfType([i().string,i().number]),height:i().oneOfType([i().string,i().number]),fen:i().string,orientation:i().string,turnColor:i().string,check:i().string,lastMove:i().array,selected:i().string,coordinates:i().bool,autoCastle:i().bool,viewOnly:i().bool,disableContextMenu:i().bool,resizable:i().bool,addPieceZIndex:i().bool,highlight:i().object,animation:i().object,movable:i().object,premovable:i().object,predroppable:i().object,draggable:i().object,selectable:i().object,onChange:i().func,onMove:i().func,onDropNewPiece:i().func,onSelect:i().func,items:i().object,drawable:i().object}),c(l,"defaultProps",{coordinates:!0,resizable:!0,highlight:{lastMove:!0,check:!0}})},8831:function(e,t,r){e.exports=r(8837)},5251:function(e,t,r){"use strict";r(7418);var n=r(7294),o=60103;if(60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),i("react.fragment")}var s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,i={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!c.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:l,ref:u,props:i,_owner:s.current}}t.jsx=l},5893:function(e,t,r){"use strict";e.exports=r(5251)},2473:function(e){"use strict";var t=function(){};e.exports=t},7901:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.anim=void 0;const n=r(687);function o(e,t){const r=e(t);return t.dom.redraw(),r}function i(e,t){return{key:e,pos:n.key2pos(e),piece:t}}function s(e,t){return t.sort((t,r)=>n.distanceSq(e.pos,t.pos)-n.distanceSq(e.pos,r.pos))[0]}t.anim=function(e,t){return t.animation.enabled?function(e,t){const r=new Map(t.pieces),o=e(t),a=function(e,t){const r=new Map,o=[],a=new Map,c=[],l=[],u=new Map;let d,p,f;for(const[n,s]of e)u.set(n,i(n,s));for(const s of n.allKeys)d=t.pieces.get(s),p=u.get(s),d?p?n.samePiece(d,p.piece)||(c.push(p),l.push(i(s,d))):l.push(i(s,d)):p&&c.push(p);for(const i of l)p=s(i,c.filter(e=>n.samePiece(i.piece,e.piece))),p&&(f=[p.pos[0]-i.pos[0],p.pos[1]-i.pos[1]],r.set(i.key,f.concat(f)),o.push(p.key));for(const n of c)o.includes(n.key)||a.set(n.key,n.piece);return{anims:r,fadings:a}}(r,t);if(a.anims.size||a.fadings.size){const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:a},e||function e(t,r){const n=t.animation.current;if(void 0===n)return void(t.dom.destroyed||t.dom.redrawNow());const o=1-(r-n.start)*n.frequency;if(o<=0)t.animation.current=void 0,t.dom.redrawNow();else{const r=(i=o)<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1;for(const e of n.plan.anims.values())e[2]=e[0]*r,e[3]=e[1]*r;t.dom.redrawNow(!0),requestAnimationFrame((r=performance.now())=>e(t,r))}var i}(t,performance.now())}else t.dom.redraw();return o}(e,t):o(e,t)},t.render=o},8955:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;const n=r(523),o=r(4660),i=r(7178),s=r(7901),a=r(8025),c=r(4038);t.start=function(e,t){function r(){n.toggleOrientation(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&r(),(t.fen?s.anim:s.render)(e=>i.configure(e,t),e)},state:e,getFen:()=>o.write(e.pieces),toggleOrientation:r,setPieces(t){s.anim(e=>n.setPieces(e,t),e)},selectSquare(t,r){t?s.anim(e=>n.selectSquare(e,t,r),e):e.selected&&(n.unselect(e),e.dom.redraw())},move(t,r){s.anim(e=>n.baseMove(e,t,r),e)},newPiece(t,r){s.anim(e=>n.baseNewPiece(e,t,r),e)},playPremove(){if(e.premovable.current){if(s.anim(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const r=n.playPredrop(e,t);return e.dom.redraw(),r}return!1},cancelPremove(){s.render(n.unsetPremove,e)},cancelPredrop(){s.render(n.unsetPredrop,e)},cancelMove(){s.render(e=>{n.cancelMove(e),a.cancel(e)},e)},stop(){s.render(e=>{n.stop(e),a.cancel(e)},e)},explode(t){c.explosion(e,t)},setAutoShapes(t){s.render(e=>e.drawable.autoShapes=t,e)},setShapes(t){s.render(e=>e.drawable.shapes=t,e)},getKeyAtDomPos:t=>n.getKeyAtDomPos(t,n.whitePov(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,r,n){a.dragNewPiece(e,t,r,n)},destroy(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whitePov=t.getSnappedKeyAtDomPos=t.getKeyAtDomPos=t.stop=t.cancelMove=t.playPredrop=t.playPremove=t.isDraggable=t.canMove=t.unselect=t.setSelected=t.selectSquare=t.dropNewPiece=t.userMove=t.baseNewPiece=t.baseMove=t.unsetPredrop=t.unsetPremove=t.setCheck=t.setPieces=t.reset=t.toggleOrientation=t.callUserFunction=void 0;const n=r(687),o=r(2420);function i(e,...t){e&&setTimeout(()=>e(...t),1)}function s(e){e.premovable.current&&(e.premovable.current=void 0,i(e.premovable.events.unset))}function a(e){const t=e.predroppable;t.current&&(t.current=void 0,i(t.events.unset))}function c(e,t,r){const o=e.pieces.get(t),s=e.pieces.get(r);if(t===r||!o)return!1;const a=s&&s.color!==o.color?s:void 0;return r===e.selected&&f(e),i(e.events.move,t,r,a),function(e,t,r){if(!e.autoCastle)return!1;const o=e.pieces.get(t);if(!o||"king"!==o.role)return!1;const i=n.key2pos(t),s=n.key2pos(r);if(0!==i[1]&&7!==i[1]||i[1]!==s[1])return!1;4!==i[0]||e.pieces.has(r)||(6===s[0]?r=n.pos2key([7,s[1]]):2===s[0]&&(r=n.pos2key([0,s[1]])));const a=e.pieces.get(r);return!(!a||a.color!==o.color||"rook"!==a.role)&&(e.pieces.delete(t),e.pieces.delete(r),i[0]<s[0]?(e.pieces.set(n.pos2key([6,s[1]]),o),e.pieces.set(n.pos2key([5,s[1]]),a)):(e.pieces.set(n.pos2key([2,s[1]]),o),e.pieces.set(n.pos2key([3,s[1]]),a)),!0)}(e,t,r)||(e.pieces.set(r,o),e.pieces.delete(t)),e.lastMove=[t,r],e.check=void 0,i(e.events.change),a||!0}function l(e,t,r,o){if(e.pieces.has(r)){if(!o)return!1;e.pieces.delete(r)}return i(e.events.dropNewPiece,t,r),e.pieces.set(r,t),e.lastMove=[r],e.check=void 0,i(e.events.change),e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),!0}function u(e,t,r){const o=c(e,t,r);return o&&(e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),e.animation.current=void 0),o}function d(e,t,r){if(g(e,t,r)){const n=u(e,t,r);if(n){const o=e.hold.stop();f(e);const s={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==n&&(s.captured=n),i(e.movable.events.after,t,r,s),!0}}else if(function(e,t,r){return t!==r&&h(e,t)&&o.premove(e.pieces,t,e.premovable.castle).includes(r)}(e,t,r))return function(e,t,r,n){a(e),e.premovable.current=[t,r],i(e.premovable.events.set,t,r,n)}(e,t,r,{ctrlKey:e.stats.ctrlKey}),f(e),!0;return f(e),!1}function p(e,t){e.selected=t,h(e,t)?e.premovable.dests=o.premove(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function f(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function v(e,t){const r=e.pieces.get(t);return!!r&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}function g(e,t,r){var n,o;return t!==r&&v(e,t)&&(e.movable.free||!!(null===(o=null===(n=e.movable.dests)||void 0===n?void 0:n.get(t))||void 0===o?void 0:o.includes(r)))}function h(e,t){const r=e.pieces.get(t);return!!r&&e.premovable.enabled&&e.movable.color===r.color&&e.turnColor!==r.color}function b(e){s(e),a(e),f(e)}t.callUserFunction=i,t.toggleOrientation=function(e){e.orientation=n.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},t.reset=function(e){e.lastMove=void 0,f(e),s(e),a(e)},t.setPieces=function(e,t){for(const[r,n]of t)n?e.pieces.set(r,n):e.pieces.delete(r)},t.setCheck=function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(const[r,n]of e.pieces)"king"===n.role&&n.color===t&&(e.check=r)},t.unsetPremove=s,t.unsetPredrop=a,t.baseMove=c,t.baseNewPiece=l,t.userMove=d,t.dropNewPiece=function(e,t,r,n){const o=e.pieces.get(t);o&&(function(e,t,r){const n=e.pieces.get(t);return!(!n||t!==r&&e.pieces.has(r)||"both"!==e.movable.color&&(e.movable.color!==n.color||e.turnColor!==n.color))}(e,t,r)||n)?(e.pieces.delete(t),l(e,o,r,n),i(e.movable.events.afterNewPiece,o.role,r,{premove:!1,predrop:!1})):o&&function(e,t,r){const n=e.pieces.get(t),o=e.pieces.get(r);return!!n&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==n.role||"1"!==r[1]&&"8"!==r[1])&&e.movable.color===n.color&&e.turnColor!==n.color}(e,t,r)?function(e,t,r){s(e),e.predroppable.current={role:t,key:r},i(e.predroppable.events.set,t,r)}(e,o.role,r):(s(e),a(e)),e.pieces.delete(t),f(e)},t.selectSquare=function(e,t,r){if(i(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return f(e),void e.hold.cancel();if((e.selectable.enabled||r)&&e.selected!==t&&d(e,e.selected,t))return void(e.stats.dragged=!1)}(v(e,t)||h(e,t))&&(p(e,t),e.hold.start())},t.setSelected=p,t.unselect=f,t.canMove=g,t.isDraggable=function(e,t){const r=e.pieces.get(t);return!!r&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===r.color&&(e.turnColor===r.color||e.premovable.enabled))},t.playPremove=function(e){const t=e.premovable.current;if(!t)return!1;const r=t[0],n=t[1];let o=!1;if(g(e,r,n)){const t=u(e,r,n);if(t){const s={premove:!0};!0!==t&&(s.captured=t),i(e.movable.events.after,r,n,s),o=!0}}return s(e),o},t.playPredrop=function(e,t){const r=e.predroppable.current;let n=!1;if(!r)return!1;if(t(r)){l(e,{role:r.role,color:e.movable.color},r.key)&&(i(e.movable.events.afterNewPiece,r.role,r.key,{premove:!1,predrop:!0}),n=!0)}return a(e),n},t.cancelMove=b,t.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,b(e)},t.getKeyAtDomPos=function(e,t,r){let o=Math.floor(8*(e[0]-r.left)/r.width);t||(o=7-o);let i=7-Math.floor(8*(e[1]-r.top)/r.height);return t||(i=7-i),o>=0&&o<8&&i>=0&&i<8?n.pos2key([o,i]):void 0},t.getSnappedKeyAtDomPos=function(e,t,r,i){const s=n.key2pos(e),a=n.allPos.filter(e=>o.queen(s[0],s[1],e[0],e[1])||o.knight(s[0],s[1],e[0],e[1])),c=a.map(e=>n.computeSquareCenter(n.pos2key(e),r,i)).map(e=>n.distanceSq(t,e)),[,l]=c.reduce((e,t,r)=>e[0]<t?e:[t,r],[c[0],0]);return n.pos2key(a[l])},t.whitePov=function(e){return"white"===e.orientation}},1191:function(e,t,r){"use strict";t.H=void 0;const n=r(8955),o=r(7178),i=r(9732),s=r(1644),a=r(3882),c=r(4722),l=r(1970),u=r(687);function d(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}t.H=function(e,t){const r=i.defaults();function p(){const t="dom"in r?r.dom.unbind:void 0,n=r.viewOnly&&!r.drawable.visible,o=s.renderWrap(e,r,n),i=u.memo(()=>o.board.getBoundingClientRect()),p=e=>{c.render(v),!e&&o.svg&&l.renderSvg(v,o.svg,o.customSvg)},f=()=>{i.clear(),c.updateBounds(v),o.svg&&l.renderSvg(v,o.svg,o.customSvg)},v=r;return v.dom={elements:o,bounds:i,redraw:d(p),redrawNow:p,unbind:t,relative:n},v.drawable.prevSvgHash="",p(!1),a.bindBoard(v,f),t||(v.dom.unbind=a.bindDocument(v,f)),v.events.insert&&v.events.insert(o),v}return o.configure(r,t||{}),n.start(p(),p)}},7178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;const n=r(523),o=r(4660);function i(e){return"object"==typeof e}t.configure=function(e,t){var r;if((null===(r=t.movable)||void 0===r?void 0:r.dests)&&(e.movable.dests=void 0),function e(t,r){for(const n in r)i(t[n])&&i(r[n])?e(t[n],r[n]):t[n]=r[n]}(e,t),t.fen&&(e.pieces=o.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&n.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&n.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?"1":"8",r="e"+t,n=e.movable.dests.get(r),o=e.pieces.get(r);if(!n||!o||"king"!==o.role)return;e.movable.dests.set(r,n.filter(e=>!(e==="a"+t&&n.includes("c"+t)||e==="h"+t&&n.includes("g"+t))))}}},8025:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancel=t.end=t.move=t.dragNewPiece=t.start=void 0;const n=r(523),o=r(687),i=r(5512),s=r(7901);function a(e){requestAnimationFrame(()=>{var t;const r=e.draggable.current;if(!r)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(r.orig))&&(e.animation.current=void 0);const n=e.pieces.get(r.orig);if(n&&o.samePiece(n,r.piece)){if(!r.started&&o.distanceSq(r.pos,r.origPos)>=Math.pow(e.draggable.distance,2)&&(r.started=!0),r.started){if("function"==typeof r.element){const e=r.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),r.element=e}const t=e.dom.bounds();o.translateAbs(r.element,[r.pos[0]-t.left-t.width/16,r.pos[1]-t.top-t.height/16])}}else c(e);a(e)})}function c(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,n.unselect(e),l(e),e.dom.redraw())}function l(e){const t=e.dom.elements;t.ghost&&o.setVisible(t.ghost,!1)}function u(e,t){let r=e.dom.elements.board.firstChild;for(;r;){if(r.cgKey===t&&"PIECE"===r.tagName)return r;r=r.nextSibling}}t.start=function(e,t){if(!t.isTrusted||void 0!==t.button&&0!==t.button)return;if(t.touches&&t.touches.length>1)return;const r=e.dom.bounds(),c=o.eventPosition(t),l=n.getKeyAtDomPos(c,n.whitePov(e),r);if(!l)return;const d=e.pieces.get(l),p=e.selected;p||!e.drawable.enabled||!e.drawable.eraseOnClick&&d&&d.color===e.turnColor||i.clear(e),!1===t.cancelable||t.touches&&e.movable.color&&!d&&!p&&!function(e,t){const r=n.whitePov(e),i=e.dom.bounds(),s=Math.pow(i.width/8,2);for(const n in e.pieces){const e=o.computeSquareCenter(n,r,i);if(o.distanceSq(e,t)<=s)return!0}return!1}(e,c)||t.preventDefault();const f=!!e.premovable.current,v=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,l)?s.anim(e=>n.selectSquare(e,l),e):n.selectSquare(e,l);const g=e.selected===l,h=u(e,l);if(d&&h&&g&&n.isDraggable(e,l)){e.draggable.current={orig:l,piece:d,origPos:c,pos:c,started:e.draggable.autoDistance&&e.stats.dragged,element:h,previouslySelected:p,originTarget:t.target},h.cgDragging=!0,h.classList.add("dragging");const i=e.dom.elements.ghost;i&&(i.className=`ghost ${d.color} ${d.role}`,o.translateAbs(i,o.posToTranslateAbs(r)(o.key2pos(l),n.whitePov(e))),o.setVisible(i,!0)),a(e)}else f&&n.unsetPremove(e),v&&n.unsetPredrop(e);e.dom.redraw()},t.dragNewPiece=function(e,t,r,n){e.pieces.set("a0",t),e.dom.redraw();const i=o.eventPosition(r);e.draggable.current={orig:"a0",piece:t,origPos:i,pos:i,started:!0,element:()=>u(e,"a0"),originTarget:r.target,newPiece:!0,force:!!n},a(e)},t.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=o.eventPosition(t))},t.end=function(e,t){const r=e.draggable.current;if(!r)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&r.originTarget!==t.target&&!r.newPiece)return void(e.draggable.current=void 0);n.unsetPremove(e),n.unsetPredrop(e);const i=o.eventPosition(t)||r.pos,s=n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds());s&&r.started&&r.orig!==s?r.newPiece?n.dropNewPiece(e,r.orig,s,r.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,r.orig,s)&&(e.stats.dragged=!0)):r.newPiece?e.pieces.delete(r.orig):e.draggable.deleteOnDropOff&&!s&&(e.pieces.delete(r.orig),n.callUserFunction(e.events.change)),(r.orig!==r.previouslySelected||r.orig!==s&&s)&&e.selectable.enabled||n.unselect(e),l(e),e.draggable.current=void 0,e.dom.redraw()},t.cancel=c},5512:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.cancel=t.end=t.move=t.processDraw=t.start=void 0;const n=r(523),o=r(687),i=["green","red","blue","yellow"];function s(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const r=n.getKeyAtDomPos(t.pos,n.whitePov(e),e.dom.bounds());r||(t.snapToValidMove=!1);const o=t.snapToValidMove?n.getSnappedKeyAtDomPos(t.orig,t.pos,n.whitePov(e),e.dom.bounds()):r;o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),s(e)}})}function a(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function c(e){var t;const r=(e.shiftKey||e.ctrlKey)&&o.isRightButton(e),n=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return i[(r?1:0)+(n?2:0)]}function l(e){e.onChange&&e.onChange(e.shapes)}t.start=function(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?n.unselect(e):n.cancelMove(e);const r=o.eventPosition(t),i=n.getKeyAtDomPos(r,n.whitePov(e),e.dom.bounds());i&&(e.drawable.current={orig:i,pos:r,brush:c(t),snapToValidMove:e.drawable.defaultSnapToValidMove},s(e))},t.processDraw=s,t.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=o.eventPosition(t))},t.end=function(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const r=e=>e.orig===t.orig&&e.dest===t.dest,n=e.shapes.find(r);n&&(e.shapes=e.shapes.filter(e=>!r(e)));n&&n.brush===t.brush||e.shapes.push(t);l(e)}(e.drawable,t),a(e))},t.cancel=a,t.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),l(e.drawable))}},7672:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drop=t.cancelDropMode=t.setDropMode=void 0;const n=r(523),o=r(687),i=r(8025);t.setDropMode=function(e,t){e.dropmode={active:!0,piece:t},i.cancel(e)},t.cancelDropMode=function(e){e.dropmode={active:!1}},t.drop=function(e,t){if(!e.dropmode.active)return;n.unsetPremove(e),n.unsetPredrop(e);const r=e.dropmode.piece;if(r){e.pieces.set("a0",r);const i=o.eventPosition(t),s=i&&n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds());s&&n.dropNewPiece(e,"a0",s)}e.dom.redraw()}},3882:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindDocument=t.bindBoard=void 0;const n=r(8025),o=r(5512),i=r(7672),s=r(687);function a(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function c(e,t,r){return n=>{e.drawable.current?e.drawable.enabled&&r(e,n):e.viewOnly||t(e,n)}}t.bindBoard=function(e,t){const r=e.dom.elements.board;if(!e.dom.relative&&e.resizable&&"ResizeObserver"in window){new window.ResizeObserver(t).observe(r)}if(e.viewOnly)return;const a=function(e){return t=>{e.draggable.current?n.cancel(e):e.drawable.current?o.cancel(e):t.shiftKey||s.isRightButton(t)?e.drawable.enabled&&o.start(e,t):e.viewOnly||(e.dropmode.active?i.drop(e,t):n.start(e,t))}}(e);r.addEventListener("touchstart",a,{passive:!1}),r.addEventListener("mousedown",a,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&r.addEventListener("contextmenu",e=>e.preventDefault())},t.bindDocument=function(e,t){const r=[];if(e.dom.relative||!e.resizable||"ResizeObserver"in window||r.push(a(document.body,"chessground.resize",t)),!e.viewOnly){const t=c(e,n.move,o.move),i=c(e,n.end,o.end);for(const e of["touchmove","mousemove"])r.push(a(document,e,t));for(const e of["touchend","mouseup"])r.push(a(document,e,i));const s=()=>e.dom.bounds.clear();r.push(a(document,"scroll",s,{capture:!0,passive:!0})),r.push(a(window,"resize",s,{passive:!0}))}return()=>r.forEach(e=>e())}},4038:function(e,t){"use strict";function r(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(t,"__esModule",{value:!0}),t.explosion=void 0,t.explosion=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{r(e,2),setTimeout(()=>r(e,void 0),120)},120)}},4660:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.write=t.read=t.initial=void 0;const n=r(687),o=r(9593);t.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";const i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},s={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};t.read=function(e){"start"===e&&(e=t.initial);const r=new Map;let o=7,s=0;for(const t of e)switch(t){case" ":return r;case"/":if(--o,o<0)return r;s=0;break;case"~":const e=r.get(n.pos2key([s,o]));e&&(e.promoted=!0);break;default:const a=t.charCodeAt(0);if(a<57)s+=a-48;else{const e=t.toLowerCase();r.set(n.pos2key([s,o]),{role:i[e],color:t===e?"black":"white"}),++s}}return r},t.write=function(e){return n.invRanks.map(t=>o.files.map(r=>{const n=e.get(r+t);if(n){const e=s[n.role];return"white"===n.color?e.toUpperCase():e}return"1"}).join("")).join("/").replace(/1{2,}/g,e=>e.length.toString())}},2420:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.premove=t.queen=t.knight=void 0;const n=r(687);function o(e,t){return Math.abs(e-t)}t.knight=(e,t,r,n)=>{const i=o(e,r),s=o(t,n);return 1===i&&2===s||2===i&&1===s};const i=(e,t,r,n)=>o(e,r)===o(t,n),s=(e,t,r,n)=>e===r||t===n;t.queen=(e,t,r,n)=>i(e,t,r,n)||s(e,t,r,n),t.premove=function(e,r,a){const c=e.get(r);if(!c)return[];const l=n.key2pos(r),u=c.role,d="pawn"===u?(p=c.color,(e,t,r,n)=>o(e,r)<2&&("white"===p?n===t+1||t<=1&&n===t+2&&e===r:n===t-1||t>=6&&n===t-2&&e===r)):"knight"===u?t.knight:"bishop"===u?i:"rook"===u?s:"queen"===u?t.queen:function(e,t,r){return(n,i,s,a)=>o(n,s)<2&&o(i,a)<2||r&&i===a&&i===("white"===e?0:7)&&(4===n&&(2===s&&t.includes(0)||6===s&&t.includes(7))||t.includes(s))}(c.color,function(e,t){const r="white"===t?"1":"8",o=[];for(const[i,s]of e)i[1]===r&&s.color===t&&"rook"===s.role&&o.push(n.key2pos(i)[0]);return o}(e,c.color),a);var p;return n.allPos.filter(e=>(l[0]!==e[0]||l[1]!==e[1])&&d(l[0],l[1],e[0],e[1])).map(n.pos2key)}},4722:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBounds=t.render=void 0;const n=r(687),o=r(523),i=r(687);function s(e){return"PIECE"===e.tagName}function a(e){return"SQUARE"===e.tagName}function c(e,t){for(const r of t)e.dom.elements.board.removeChild(r)}function l(e,t){let r=2+8*e[1]+(7-e[0]);return t&&(r=67-r),r+""}function u(e){return`${e.color} ${e.role}`}function d(e,t,r){const n=e.get(t);n?e.set(t,`${n} ${r}`):e.set(t,r)}function p(e,t,r){const n=e.get(t);n?n.push(r):e.set(t,[r])}t.render=function(e){const t=o.whitePov(e),r=e.dom.relative?i.posToTranslateRel:i.posToTranslateAbs(e.dom.bounds()),f=e.dom.relative?i.translateRel:i.translateAbs,v=e.dom.elements.board,g=e.pieces,h=e.animation.current,b=h?h.plan.anims:new Map,m=h?h.plan.fadings:new Map,y=e.draggable.current,w=function(e){var t;const r=new Map;if(e.lastMove&&e.highlight.lastMove)for(const i of e.lastMove)d(r,i,"last-move");e.check&&e.highlight.check&&d(r,e.check,"check");if(e.selected&&(d(r,e.selected,"selected"),e.movable.showDests)){const n=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(n)for(const t of n)d(r,t,"move-dest"+(e.pieces.has(t)?" oc":""));const o=e.premovable.dests;if(o)for(const t of o)d(r,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}const n=e.premovable.current;if(n)for(const i of n)d(r,i,"current-premove");else e.predroppable.current&&d(r,e.predroppable.current.key,"current-premove");const o=e.exploding;if(o)for(const i of o.keys)d(r,i,"exploding"+o.stage);return r}(e),P=new Set,k=new Set,C=new Map,S=new Map;let E,_,A,x,O,N,M,T,j,I;for(_=v.firstChild;_;){if(E=_.cgKey,s(_))if(A=g.get(E),O=b.get(E),N=m.get(E),x=_.cgPiece,!_.cgDragging||y&&y.orig===E||(_.classList.remove("dragging"),f(_,r(n.key2pos(E),t)),_.cgDragging=!1),!N&&_.cgFading&&(_.cgFading=!1,_.classList.remove("fading")),A){if(O&&_.cgAnimating&&x===u(A)){const e=n.key2pos(E);e[0]+=O[2],e[1]+=O[3],_.classList.add("anim"),f(_,r(e,t))}else _.cgAnimating&&(_.cgAnimating=!1,_.classList.remove("anim"),f(_,r(n.key2pos(E),t)),e.addPieceZIndex&&(_.style.zIndex=l(n.key2pos(E),t)));x!==u(A)||N&&_.cgFading?N&&x===u(N)?(_.classList.add("fading"),_.cgFading=!0):p(C,x,_):P.add(E)}else p(C,x,_);else if(a(_)){const e=_.className;w.get(E)===e?k.add(E):p(S,e,_)}_=_.nextSibling}for(const[o,i]of w)if(!k.has(o)){j=S.get(i),I=j&&j.pop();const e=r(n.key2pos(o),t);if(I)I.cgKey=o,f(I,e);else{const t=n.createEl("square",i);t.cgKey=o,f(t,e),v.insertBefore(t,v.firstChild)}}for(const[o,i]of g)if(O=b.get(o),!P.has(o))if(M=C.get(u(i)),T=M&&M.pop(),T){T.cgKey=o,T.cgFading&&(T.classList.remove("fading"),T.cgFading=!1);const i=n.key2pos(o);e.addPieceZIndex&&(T.style.zIndex=l(i,t)),O&&(T.cgAnimating=!0,T.classList.add("anim"),i[0]+=O[2],i[1]+=O[3]),f(T,r(i,t))}else{const s=u(i),a=n.createEl("piece",s),c=n.key2pos(o);a.cgPiece=s,a.cgKey=o,O&&(a.cgAnimating=!0,c[0]+=O[2],c[1]+=O[3]),f(a,r(c,t)),e.addPieceZIndex&&(a.style.zIndex=l(c,t)),v.appendChild(a)}for(const n of C.values())c(e,n);for(const n of S.values())c(e,n)},t.updateBounds=function(e){if(e.dom.relative)return;const t=o.whitePov(e),r=i.posToTranslateAbs(e.dom.bounds());let c=e.dom.elements.board.firstChild;for(;c;)(s(c)&&!c.cgAnimating||a(c))&&i.translateAbs(c,r(n.key2pos(c.cgKey),t)),c=c.nextSibling}},9732:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0;const n=r(4660),o=r(687);t.defaults=function(){return{pieces:n.read(n.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},1970:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAttributes=t.renderSvg=t.createElement=void 0;const n=r(687);function o(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i(e,t,r,n,o){const i=e.dom.bounds(),s=new Map,a=[];for(const l of t)s.set(l.hash,!1);let c,u=o.firstChild;for(;u;)c=u.getAttribute("cgHash"),s.has(c)?s.set(c,!0):a.push(u),u=u.nextSibling;for(const l of a)o.removeChild(l);for(const d of t)s.get(d.hash)||o.appendChild(l(e,d,r,n,i))}function s({orig:e,dest:t,brush:r,piece:n,modifiers:o,customSvg:i},s,l,u){return[u.width,u.height,l,e,t,r,t&&(s.get(t)||0)>1,n&&a(n),o&&(d=o,""+(d.lineWidth||"")),i&&c(i)].filter(e=>e).join(",");var d}function a(e){return[e.color,e.role,e.scale].filter(e=>e).join(",")}function c(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)>>>0;return"custom-"+t.toString()}function l(e,{shape:t,current:r,hash:i},s,a,c){let l;if(t.customSvg){const r=p(n.key2pos(t.orig),e.orientation);l=function(e,t,r){const{width:n,height:i}=r,s=n/8,a=i/8,c=t[0]*s,l=(7-t[1])*a,u=d(o("g"),{transform:`translate(${c},${l})`}),p=d(o("svg"),{width:s,height:a,viewBox:"0 0 100 100"});return u.appendChild(p),p.innerHTML=e,u}(t.customSvg,r,c)}else if(t.piece)l=function(e,t,r,n){const i=h(t,n),s=n.width/8*(r.scale||1),a=r.color[0]+("knight"===r.role?"n":r.role[0]).toUpperCase();return d(o("image"),{className:`${r.role} ${r.color}`,x:i[0]-s/2,y:i[1]-s/2,width:s,height:s,href:e+a+".svg"})}(e.drawable.pieces.baseUrl,p(n.key2pos(t.orig),e.orientation),t.piece,c);else{const i=p(n.key2pos(t.orig),e.orientation);if(t.dest){let u=s[t.brush];t.modifiers&&(u=f(u,t.modifiers)),l=function(e,t,r,n,i,s){const a=function(e,t){return(t?20:10)/512*e.width}(s,i&&!n),c=h(t,s),l=h(r,s),u=l[0]-c[0],p=l[1]-c[1],f=Math.atan2(p,u),b=Math.cos(f)*a,m=Math.sin(f)*a;return d(o("line"),{stroke:e.color,"stroke-width":v(e,n,s),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:g(e,n),x1:c[0],y1:c[1],x2:l[0]-b,y2:l[1]-m})}(u,i,p(n.key2pos(t.dest),e.orientation),r,(a.get(t.dest)||0)>1,c)}else l=function(e,t,r,n){const i=h(t,n),s=function(e){const t=e.width/512;return[3*t,4*t]}(n),a=(n.width+n.height)/32;return d(o("circle"),{stroke:e.color,"stroke-width":s[r?0:1],fill:"none",opacity:g(e,r),cx:i[0],cy:i[1],r:a-s[1]/2})}(s[t.brush],i,r,c)}return l.setAttribute("cgHash",i),l}function u(e){const t=d(o("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(d(o("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function d(e,t){for(const r in t)e.setAttribute(r,t[r]);return e}function p(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function f(e,t){return{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(e=>e).join("")}}function v(e,t,r){return(e.lineWidth||10)*(t?.85:1)/512*r.width}function g(e,t){return(e.opacity||1)*(t?.9:1)}function h(e,t){return[(e[0]+.5)*t.width/8,(7.5-e[1])*t.height/8]}t.createElement=o,t.renderSvg=function(e,t,r){const n=e.drawable,o=n.current,a=o&&o.mouseSq?o:void 0,c=new Map,l=e.dom.bounds();for(const i of n.shapes.concat(n.autoShapes).concat(a?[a]:[]))i.dest&&c.set(i.dest,(c.get(i.dest)||0)+1);const d=n.shapes.concat(n.autoShapes).map(e=>({shape:e,current:!1,hash:s(e,c,!1,l)}));a&&d.push({shape:a,current:!0,hash:s(a,c,!0,l)});const p=d.map(e=>e.hash).join(";");if(p===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=p;const v=t.querySelector("defs"),g=t.querySelector("g"),h=r.querySelector("g");!function(e,t,r){const n=new Map;let o;for(const a of t)a.shape.dest&&(o=e.brushes[a.shape.brush],a.shape.modifiers&&(o=f(o,a.shape.modifiers)),n.set(o.key,o));const i=new Set;let s=r.firstChild;for(;s;)i.add(s.getAttribute("cgKey")),s=s.nextSibling;for(const[a,c]of n.entries())i.has(a)||r.appendChild(u(c))}(n,d,v),i(e,d.filter(e=>!e.shape.customSvg),n.brushes,c,g),i(e,d.filter(e=>e.shape.customSvg),n.brushes,c,h)},t.setAttributes=d},9593:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ranks=t.files=t.colors=void 0,t.colors=["white","black"],t.files=["a","b","c","d","e","f","g","h"],t.ranks=["1","2","3","4","5","6","7","8"]},687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeSquareCenter=t.createEl=t.isRightButton=t.eventPosition=t.setVisible=t.translateRel=t.translateAbs=t.posToTranslateRel=t.posToTranslateAbs=t.samePiece=t.distanceSq=t.opposite=t.timer=t.memo=t.allPos=t.key2pos=t.pos2key=t.allKeys=t.invRanks=void 0;const n=r(9593);t.invRanks=[...n.ranks].reverse(),t.allKeys=Array.prototype.concat(...n.files.map(e=>n.ranks.map(t=>e+t)));t.pos2key=e=>t.allKeys[8*e[0]+e[1]];t.key2pos=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],t.allPos=t.allKeys.map(t.key2pos),t.memo=function(e){let t;const r=()=>(void 0===t&&(t=e()),t);return r.clear=()=>{t=void 0},r};t.timer=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}};t.opposite=e=>"white"===e?"black":"white";t.distanceSq=(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n};t.samePiece=(e,t)=>e.role===t.role&&e.color===t.color;const o=(e,t,r,n)=>[(t?e[0]:7-e[0])*r,(t?7-e[1]:e[1])*n];t.posToTranslateAbs=e=>{const t=e.width/8,r=e.height/8;return(e,n)=>o(e,n,t,r)};t.posToTranslateRel=(e,t)=>o(e,t,100,100);t.translateAbs=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`};t.translateRel=(e,t)=>{e.style.transform=`translate(${t[0]}%,${t[1]}%)`};t.setVisible=(e,t)=>{e.style.visibility=t?"visible":"hidden"};t.eventPosition=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0};t.isRightButton=e=>2===e.buttons||2===e.button;t.createEl=(e,t)=>{const r=document.createElement(e);return t&&(r.className=t),r},t.computeSquareCenter=function(e,r,n){const o=t.key2pos(e);return r||(o[0]=7-o[0],o[1]=7-o[1]),[n.left+n.width*o[0]/8+n.width/16,n.top+n.height*(7-o[1])/8+n.height/16]}},1644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderWrap=void 0;const n=r(687),o=r(9593),i=r(1970);function s(e,t){const r=n.createEl("coords",t);let o;for(const i of e)o=n.createEl("coord"),o.textContent=i,r.appendChild(o);return r}t.renderWrap=function(e,t,r){e.innerHTML="",e.classList.add("cg-wrap");for(const n of o.colors)e.classList.toggle("orientation-"+n,t.orientation===n);e.classList.toggle("manipulable",!t.viewOnly);const a=n.createEl("cg-helper");e.appendChild(a);const c=n.createEl("cg-container");a.appendChild(c);const l=n.createEl("cg-board");let u,d,p;if(c.appendChild(l),t.drawable.visible&&!r&&(u=i.setAttributes(i.createElement("svg"),{class:"cg-shapes"}),u.appendChild(i.createElement("defs")),u.appendChild(i.createElement("g")),d=i.setAttributes(i.createElement("svg"),{class:"cg-custom-svgs"}),d.appendChild(i.createElement("g")),c.appendChild(u),c.appendChild(d)),t.coordinates){const e="black"===t.orientation?" black":"";c.appendChild(s(o.ranks,"ranks"+e)),c.appendChild(s(o.files,"files"+e))}return t.draggable.showGhost&&!r&&(p=n.createEl("piece","ghost"),n.setVisible(p,!1),c.appendChild(p)),{board:l,container:c,ghost:p,svg:u,customSvg:d}}}}]);