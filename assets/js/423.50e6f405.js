/*! For license information please see 423.50e6f405.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[423],{8437:function(e,t,r){var n,o=function(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",r=["1-0","0-1","1/2-1/2","*"],n={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],a=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],s={p:0,n:1,b:2,r:3,q:4,k:5},c={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},l={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},u={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},d={w:[{square:u.a1,flag:l.QSIDE_CASTLE},{square:u.h1,flag:l.KSIDE_CASTLE}],b:[{square:u.a8,flag:l.QSIDE_CASTLE},{square:u.h8,flag:l.KSIDE_CASTLE}]},f=new Array(128),p={w:-1,b:-1},v="w",g={w:0,b:0},h=-1,b=0,m=1,y=[],w={};function P(e){void 0===e&&(e=!1),f=new Array(128),p={w:-1,b:-1},v="w",g={w:0,b:0},h=-1,b=0,m=1,y=[],e||(w={}),_(E())}function k(){C(t)}function C(e,t){void 0===t&&(t=!1);var r=e.split(/\s+/),n=r[0],o=0;if(!S(e).valid)return!1;P(t);for(var i=0;i<n.length;i++){var a=n.charAt(i);if("/"===a)o+=8;else if(-1!=="0123456789".indexOf(a))o+=parseInt(a,10);else{var s=a<"a"?"w":"b";M({type:a.toLowerCase(),color:s},Q(o)),o++}}return v=r[1],r[2].indexOf("K")>-1&&(g.w|=l.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(g.w|=l.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(g.b|=l.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(g.b|=l.QSIDE_CASTLE),h="-"===r[3]?-1:u[r[3]],b=parseInt(r[4],10),m=parseInt(r[5],10),_(E()),!0}function S(e){var t="No errors.",r="FEN string must contain six space-delimited fields.",n="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",a="3rd field (castling availability) is invalid.",s="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",f="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:r};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:n};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:a};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:s};var v=p[0].split("/");if(8!==v.length)return{valid:!1,error_number:7,error:c};for(var g=0;g<v.length;g++){for(var h=0,b=!1,m=0;m<v[g].length;m++)if(isNaN(v[g][m])){if(!/^[prnbqkPRNBQK]$/.test(v[g][m]))return{valid:!1,error_number:9,error:u};h+=1,b=!1}else{if(b)return{valid:!1,error_number:8,error:l};h+=parseInt(v[g][m],10),b=!0}if(8!==h)return{valid:!1,error_number:10,error:d}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:f}:{valid:!0,error_number:0,error:t}}function E(){for(var e=0,t="",r=u.a8;r<=u.h1;r++){if(null==f[r])e++;else{e>0&&(t+=e,e=0);var n=f[r].color,o=f[r].type;t+="w"===n?o.toUpperCase():o.toLowerCase()}r+1&136&&(e>0&&(t+=e),r!==u.h1&&(t+="/"),e=0,r+=8)}var i="";g.w&l.KSIDE_CASTLE&&(i+="K"),g.w&l.QSIDE_CASTLE&&(i+="Q"),g.b&l.KSIDE_CASTLE&&(i+="k"),g.b&l.QSIDE_CASTLE&&(i+="q"),i=i||"-";var a=-1===h?"-":Q(h);return[t,v,i,a,b,m].join(" ")}function A(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(w[e[t]]=e[t+1]);return w}function _(e){y.length>0||(e!==t?(w.SetUp="1",w.FEN=e):(delete w.SetUp,delete w.FEN))}function N(e){var t=f[u[e]];return t?{type:t.type,color:t.color}:null}function M(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in u))return!1;var r=u[t];return("k"!=e.type||-1==p[e.color]||p[e.color]==r)&&(f[r]={type:e.type,color:e.color},"k"===e.type&&(p[e.color]=r),_(E()),!0)}function x(e,t,r,n,o){var i={color:v,from:t,to:r,flags:n,piece:e[t].type};return o&&(i.flags|=l.PROMOTION,i.promotion=o),e[r]?i.captured=e[r].type:n&l.EP_CAPTURE&&(i.captured="p"),i}function T(e){function t(e,t,r,n,o){if("p"!==e[r].type||0!==F(n)&&7!==F(n))t.push(x(e,r,n,o));else for(var i=["q","r","b","n"],a=0,s=i.length;a<s;a++)t.push(x(e,r,n,o,i[a]))}var r=[],i=v,a=$(i),s={b:1,w:6},c=u.a8,d=u.h1,b=!1,m=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in u))return[];c=d=u[e.square],b=!0}for(var y=c;y<=d;y++)if(136&y)y+=7;else{var w=f[y];if(null!=w&&w.color===i)if("p"===w.type){var P=y+n[i][0];if(null==f[P]){t(f,r,y,P,l.NORMAL);P=y+n[i][1];s[i]===F(y)&&null==f[P]&&t(f,r,y,P,l.BIG_PAWN)}for(k=2;k<4;k++){136&(P=y+n[i][k])||(null!=f[P]&&f[P].color===a?t(f,r,y,P,l.CAPTURE):P===h&&t(f,r,y,h,l.EP_CAPTURE))}}else for(var k=0,C=o[w.type].length;k<C;k++){var S=o[w.type][k];for(P=y;!(136&(P+=S));){if(null!=f[P]){if(f[P].color===i)break;t(f,r,y,P,l.CAPTURE);break}if(t(f,r,y,P,l.NORMAL),"n"===w.type||"k"===w.type)break}}}if(!b||d===p[i]){if(g[i]&l.KSIDE_CASTLE){var E=(A=p[i])+2;null!=f[A+1]||null!=f[E]||K(a,p[i])||K(a,A+1)||K(a,E)||t(f,r,p[i],E,l.KSIDE_CASTLE)}if(g[i]&l.QSIDE_CASTLE){var A;E=(A=p[i])-2;null!=f[A-1]||null!=f[A-2]||null!=f[A-3]||K(a,p[i])||K(a,A-1)||K(a,E)||t(f,r,p[i],E,l.QSIDE_CASTLE)}}if(!m)return r;var _=[];for(y=0,C=r.length;y<C;y++)U(r[y]),R(i)||_.push(r[y]),B();return _}function O(e,t){var r="";if(e.flags&l.KSIDE_CASTLE)r="O-O";else if(e.flags&l.QSIDE_CASTLE)r="O-O-O";else{var n=function(e,t){for(var r=T({legal:!t}),n=e.from,o=e.to,i=e.piece,a=0,s=0,c=0,l=0,u=r.length;l<u;l++){var d=r[l].from,f=r[l].to,p=r[l].piece;i===p&&n!==d&&o===f&&(a++,F(n)===F(d)&&s++,W(n)===W(d)&&c++)}if(a>0)return s>0&&c>0?Q(n):c>0?Q(n).charAt(1):Q(n).charAt(0);return""}(e,t);"p"!==e.piece&&(r+=e.piece.toUpperCase()+n),e.flags&(l.CAPTURE|l.EP_CAPTURE)&&("p"===e.piece&&(r+=Q(e.from)[0]),r+="x"),r+=Q(e.to),e.flags&l.PROMOTION&&(r+="="+e.promotion.toUpperCase())}return U(e),I()&&(q()?r+="#":r+="+"),B(),r}function D(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function K(e,t){for(var r=u.a8;r<=u.h1;r++)if(136&r)r+=7;else if(null!=f[r]&&f[r].color===e){var n=f[r],o=r-t,c=o+119;if(i[c]&1<<s[n.type]){if("p"===n.type){if(o>0){if("w"===n.color)return!0}else if("b"===n.color)return!0;continue}if("n"===n.type||"k"===n.type)return!0;for(var l=a[c],d=r+l,p=!1;d!==t;){if(null!=f[d]){p=!0;break}d+=l}if(!p)return!0}}return!1}function R(e){return K($(e),p[e])}function I(){return R(v)}function q(){return I()&&0===T().length}function L(){return!I()&&0===T().length}function j(){for(var e={},t=[],r=0,n=0,o=u.a8;o<=u.h1;o++)if(n=(n+1)%2,136&o)o+=7;else{var i=f[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&t.push(n),r++)}if(2===r)return!0;if(3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){var a=0,s=t.length;for(o=0;o<s;o++)a+=t[o];if(0===a||a===s)return!0}return!1}function Z(){for(var e=[],t={},r=!1;;){var n=B();if(!n)break;e.push(n)}for(;;){var o=E().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(r=!0),!e.length)break;U(e.pop())}return r}function U(e){var t=v,r=$(t);if(function(e){y.push({move:e,kings:{b:p.b,w:p.w},turn:v,castling:{b:g.b,w:g.w},ep_square:h,half_moves:b,move_number:m})}(e),f[e.to]=f[e.from],f[e.from]=null,e.flags&l.EP_CAPTURE&&("b"===v?f[e.to-16]=null:f[e.to+16]=null),e.flags&l.PROMOTION&&(f[e.to]={type:e.promotion,color:t}),"k"===f[e.to].type){if(p[f[e.to].color]=e.to,e.flags&l.KSIDE_CASTLE){var n=e.to-1,o=e.to+1;f[n]=f[o],f[o]=null}else if(e.flags&l.QSIDE_CASTLE){n=e.to+1,o=e.to-2;f[n]=f[o],f[o]=null}g[t]=""}if(g[t])for(var i=0,a=d[t].length;i<a;i++)if(e.from===d[t][i].square&&g[t]&d[t][i].flag){g[t]^=d[t][i].flag;break}if(g[r])for(i=0,a=d[r].length;i<a;i++)if(e.to===d[r][i].square&&g[r]&d[r][i].flag){g[r]^=d[r][i].flag;break}h=e.flags&l.BIG_PAWN?"b"===v?e.to-16:e.to+16:-1,"p"===e.piece||e.flags&(l.CAPTURE|l.EP_CAPTURE)?b=0:b++,"b"===v&&m++,v=$(v)}function B(){var e=y.pop();if(null==e)return null;var t=e.move;p=e.kings,v=e.turn,g=e.castling,h=e.ep_square,b=e.half_moves,m=e.move_number;var r,n,o=v,i=$(v);if(f[t.from]=f[t.to],f[t.from].type=t.piece,f[t.to]=null,t.flags&l.CAPTURE)f[t.to]={type:t.captured,color:i};else if(t.flags&l.EP_CAPTURE){var a;a="b"===o?t.to-16:t.to+16,f[a]={type:"p",color:i}}t.flags&(l.KSIDE_CASTLE|l.QSIDE_CASTLE)&&(t.flags&l.KSIDE_CASTLE?(r=t.to+1,n=t.to-1):t.flags&l.QSIDE_CASTLE&&(r=t.to-2,n=t.to+1),f[r]=f[n],f[n]=null);return t}function z(e,t){var r=D(e);if(t){var n=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(n)var o=n[1],i=n[2],a=n[3],s=n[4]}for(var c=T(),l=0,d=c.length;l<d;l++){if(r===D(O(c[l]))||t&&r===D(O(c[l],!0)))return c[l];if(n&&(!o||o.toLowerCase()==c[l].piece)&&u[i]==c[l].from&&u[a]==c[l].to&&(!s||s.toLowerCase()==c[l].promotion))return c[l]}return null}function F(e){return e>>4}function W(e){return 15&e}function Q(e){var t=W(e),r=F(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function $(e){return"w"===e?"b":"w"}function V(e){var t=function e(t){var r=t instanceof Array?[]:{};for(var n in t)r[n]="object"==typeof n?e(t[n]):t[n];return r}(e);t.san=O(t,!1),t.to=Q(t.to),t.from=Q(t.from);var r="";for(var n in l)l[n]&t.flags&&(r+=c[n]);return t.flags=r,t}function G(e){return e.replace(/^\s+|\s+$/g,"")}return C(void 0===e?t:e),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var e=[],t=u.a8;t<=u.h1;t++)136&t?t+=7:e.push(Q(t));return e}(),FLAGS:c,load:function(e){return C(e)},reset:function(){return k()},moves:function(e){for(var t=T(e),r=[],n=0,o=t.length;n<o;n++)void 0!==e&&"verbose"in e&&e.verbose?r.push(V(t[n])):r.push(O(t[n],!1));return r},in_check:function(){return I()},in_checkmate:function(){return q()},in_stalemate:function(){return L()},in_draw:function(){return b>=100||L()||j()||Z()},insufficient_material:function(){return j()},in_threefold_repetition:function(){return Z()},game_over:function(){return b>=100||q()||L()||j()||Z()},validate_fen:function(e){return S(e)},fen:function(){return E()},board:function(){for(var e=[],t=[],r=u.a8;r<=u.h1;r++)null==f[r]?t.push(null):t.push({type:f[r].type,color:f[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",r="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,n=[],o=!1;for(var i in w)n.push("["+i+' "'+w[i]+'"]'+t),o=!0;o&&y.length&&n.push(t);for(var a=[];y.length>0;)a.push(B());for(var s=[],c="";a.length>0;){var l=a.pop();y.length||"b"!==l.color?"w"===l.color&&(c.length&&s.push(c),c=m+"."):c=m+". ...",c=c+" "+O(l,!1),U(l)}if(c.length&&s.push(c),void 0!==w.Result&&s.push(w.Result),0===r)return n.join("")+s.join(" ");var u=0;for(i=0;i<s.length;i++)u+s[i].length>r&&0!==i?(" "===n[n.length-1]&&n.pop(),n.push(t),u=0):0!==i&&(n.push(" "),u++),n.push(s[i]),u+=s[i].length;return n.join("")},load_pgn:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy;function o(e){return e.replace(/\\/g,"\\")}var i="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",a=new RegExp("^(\\[((?:"+o(i)+")|.)*\\])(?:"+o(i)+"){2}"),s=a.test(e)?a.exec(e)[1]:"";k();var c=function(e,t){for(var r="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",n={},i=e.split(new RegExp(o(r))),a="",s="",c=0;c<i.length;c++)a=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),s=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),G(a).length>0&&(n[a]=s);return n}(s,t);for(var l in c)A([l,c[l]]);if(!("1"!==c.SetUp||"FEN"in c&&C(c.FEN,!0)))return!1;var u=e.replace(s,"").replace(new RegExp(o(i),"g")," ");u=u.replace(/(\{[^}]+\})+?/g,"");for(var d=/(\([^\(\)]+\))+?/g;d.test(u);)u=u.replace(d,"");var f=G(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var p="",v=0;v<f.length-1;v++){if(null==(p=z(f[v],n)))return!1;U(p)}if(p=f[f.length-1],r.indexOf(p)>-1)(function(e){for(var t in e)return!0;return!1})(w)&&void 0===w.Result&&A(["Result",p]);else{if(null==(p=z(p,n)))return!1;U(p)}return!0},header:function(){return A(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=u.a8;t<=u.h1;t++){if(0===W(t)&&(e+=" "+"87654321"[F(t)]+" |"),null==f[t])e+=" . ";else{var r=f[t].type;e+=" "+("w"===f[t].color?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return v},move:function(e,t){var r=void 0!==t&&"sloppy"in t&&t.sloppy,n=null;if("string"==typeof e)n=z(e,r);else if("object"==typeof e)for(var o=T(),i=0,a=o.length;i<a;i++)if(e.from===Q(o[i].from)&&e.to===Q(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){n=o[i];break}if(!n)return null;var s=V(n);return U(n),s},undo:function(){var e=B();return e?V(e):null},clear:function(){return P()},put:function(e,t){return M(e,t)},get:function(e){return N(e)},remove:function(e){return function(e){var t=N(e);return f[u[e]]=null,t&&"k"===t.type&&(p[t.color]=-1),_(E()),t}(e)},perft:function(e){return function e(t){for(var r=T({legal:!1}),n=0,o=v,i=0,a=r.length;i<a;i++){if(U(r[i]),!R(o))if(t-1>0)n+=e(t-1);else n++;B()}return n}(e)},square_color:function(e){if(e in u){var t=u[e];return(F(t)+W(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],r=[],n=(void 0!==e&&"verbose"in e&&e.verbose);y.length>0;)t.push(B());for(;t.length>0;){var o=t.pop();n?r.push(V(o)):r.push(O(o)),U(o)}return r}}};t.Chess=o,void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},4184:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},1143:function(e){"use strict";e.exports=function(e,t,r,n,o,i,a,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,i,a,s],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},4391:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=null;return t.forEach((function(e){if(null==o){var t=e.apply(void 0,r);null!=t&&(o=t)}})),o}return(0,i.default)(n)};var n,o=r(2613),i=(n=o)&&n.__esModule?n:{default:n};e.exports=t.default},2613:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,r,n,o,i,a){var s=o||"<<anonymous>>",c=a||n;if(null==r[n])return t?new Error("Required "+i+" `"+c+"` was not specified in `"+s+"`."):null;for(var l=arguments.length,u=Array(l>6?l-6:0),d=6;d<l;d++)u[d-6]=arguments[d];return e.apply(void 0,[r,n,s,i,c].concat(u))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r},e.exports=t.default},3754:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(7462),o=r(3366),i=r(4184),a=r.n(i),s=r(7294),c=r(6792);var l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n),t.apply(this,n)}}),null)},u=["as","disabled","onKeyDown"];function d(e){return!e||"#"===e.trim()}var f=s.forwardRef((function(e,t){var r=e.as,i=void 0===r?"a":r,a=e.disabled,c=e.onKeyDown,f=(0,o.Z)(e,u),p=function(e){var t=f.href,r=f.onClick;(a||d(t))&&e.preventDefault(),a?e.stopPropagation():r&&r(e)};return d(f.href)&&(f.role=f.role||"button",f.href=f.href||"#"),a&&(f.tabIndex=-1,f["aria-disabled"]=!0),s.createElement(i,(0,n.Z)({ref:t},f,{onClick:p,onKeyDown:l((function(e){" "===e.key&&(e.preventDefault(),p(e))}),c)}))}));f.displayName="SafeAnchor";var p=f,v=["bsPrefix","variant","size","active","className","block","type","as"],g=s.forwardRef((function(e,t){var r=e.bsPrefix,i=e.variant,l=e.size,u=e.active,d=e.className,f=e.block,g=e.type,h=e.as,b=(0,o.Z)(e,v),m=(0,c.vE)(r,"btn"),y=a()(d,m,u&&"active",i&&m+"-"+i,f&&m+"-block",l&&m+"-"+l);if(b.href)return s.createElement(p,(0,n.Z)({},b,{as:h,ref:t,className:a()(y,b.disabled&&"disabled")}));t&&(b.ref=t),g?b.type=g:h||(b.type="button");var w=h||"button";return s.createElement(w,(0,n.Z)({},b,{className:y}))}));g.displayName="Button",g.defaultProps={variant:"primary",active:!1,disabled:!1};var h=g},9005:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(7462),o=r(3366),i=r(4184),a=r.n(i),s=(r(4391),r(7294)),c=(r(2473),r(5697)),l=r.n(c),u=["as","className","type","tooltip"],d={type:l().string,tooltip:l().bool,as:l().elementType},f=s.forwardRef((function(e,t){var r=e.as,i=void 0===r?"div":r,c=e.className,l=e.type,d=void 0===l?"valid":l,f=e.tooltip,p=void 0!==f&&f,v=(0,o.Z)(e,u);return s.createElement(i,(0,n.Z)({},v,{ref:t,className:a()(c,d+"-"+(p?"tooltip":"feedback"))}))}));f.displayName="Feedback",f.propTypes=d;var p=f,v=s.createContext({controlId:void 0}),g=r(6792),h=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],b=s.forwardRef((function(e,t){var r,i,c=e.bsPrefix,l=e.bsCustomPrefix,u=e.type,d=e.size,f=e.htmlSize,p=e.id,b=e.className,m=e.isValid,y=void 0!==m&&m,w=e.isInvalid,P=void 0!==w&&w,k=e.plaintext,C=e.readOnly,S=e.custom,E=e.as,A=void 0===E?"input":E,_=(0,o.Z)(e,h),N=(0,s.useContext)(v).controlId,M=S?[l,"custom"]:[c,"form-control"],x=M[0],T=M[1];if(c=(0,g.vE)(x,T),k)(i={})[c+"-plaintext"]=!0,r=i;else if("file"===u){var O;(O={})[c+"-file"]=!0,r=O}else if("range"===u){var D;(D={})[c+"-range"]=!0,r=D}else if("select"===A&&S){var K;(K={})[c+"-select"]=!0,K[c+"-select-"+d]=d,r=K}else{var R;(R={})[c]=!0,R[c+"-"+d]=d,r=R}return s.createElement(A,(0,n.Z)({},_,{type:u,size:f,ref:t,readOnly:C,id:p||N,className:a()(b,r,y&&"is-valid",P&&"is-invalid")}))}));b.displayName="FormControl";var m=Object.assign(b,{Feedback:p})},326:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(3366),o=r(7462),i=r(4184),a=r.n(i),s=r(7294),c=/-(.)/g;var l=r(6792),u=["className","bsPrefix","as"],d=function(e){return e[0].toUpperCase()+(t=e,t.replace(c,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function f(e,t){var r=void 0===t?{}:t,i=r.displayName,c=void 0===i?d(e):i,f=r.Component,p=r.defaultProps,v=s.forwardRef((function(t,r){var i=t.className,c=t.bsPrefix,d=t.as,p=void 0===d?f||"div":d,v=(0,n.Z)(t,u),g=(0,l.vE)(c,e);return s.createElement(p,(0,o.Z)({ref:r,className:a()(i,g)},v))}));return v.defaultProps=p,v.displayName=c,v}var p=["bsPrefix","size","hasValidation","className","as"],v=f("input-group-append"),g=f("input-group-prepend"),h=f("input-group-text",{Component:"span"}),b=s.forwardRef((function(e,t){var r=e.bsPrefix,i=e.size,c=e.hasValidation,u=e.className,d=e.as,f=void 0===d?"div":d,v=(0,n.Z)(e,p);return r=(0,l.vE)(r,"input-group"),s.createElement(f,(0,o.Z)({ref:t},v,{className:a()(u,r,i&&r+"-"+i,c&&"has-validation")}))}));b.displayName="InputGroup",b.Text=h,b.Radio=function(e){return s.createElement(h,null,s.createElement("input",(0,o.Z)({type:"radio"},e)))},b.Checkbox=function(e){return s.createElement(h,null,s.createElement("input",(0,o.Z)({type:"checkbox"},e)))},b.Append=v,b.Prepend=g;var m=b},2113:function(e,t,r){"use strict";r.d(t,{Z:function(){return q}});var n=r(7462),o=r(3366),i=r(4184),a=r.n(i),s=r(7294);r(2473),r(1143);function c(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function l(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function u(e,t){return Object.keys(t).reduce((function(r,i){var a,u=r,d=u[c(i)],f=u[i],p=(0,o.Z)(u,[c(i),i].map(l)),v=t[i],g=function(e,t,r){var n=(0,s.useRef)(void 0!==e),o=(0,s.useState)(t),i=o[0],a=o[1],c=void 0!==e,l=n.current;return n.current=c,!c&&l&&i!==t&&a(t),[c?e:i,(0,s.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];r&&r.apply(void 0,[e].concat(n)),a(e)}),[r])]}(f,d,e[v]),h=g[0],b=g[1];return(0,n.Z)({},p,((a={})[i]=h,a[v]=b,a))}),e)}function d(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function f(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function p(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}d.__suppressDeprecationWarning=!0,f.__suppressDeprecationWarning=!0,p.__suppressDeprecationWarning=!0;var v=r(6792),g=Function.prototype.bind.call(Function.prototype.call,[].slice);var h=function(e){return e&&"function"!=typeof e?function(t){e.current=t}:e};var b=function(e,t){return(0,s.useMemo)((function(){return function(e,t){var r=h(e),n=h(t);return function(e){r&&r(e),n&&n(e)}}(e,t)}),[e,t])},m=s.createContext(null);m.displayName="NavContext";var y=m,w=function(e,t){return void 0===t&&(t=null),null!=e?String(e):t||null},P=s.createContext(null),k=s.createContext(null),C=["as","onSelect","activeKey","role","onKeyDown"],S=function(){},E=s.forwardRef((function(e,t){var r,i,a=e.as,c=void 0===a?"ul":a,l=e.onSelect,u=e.activeKey,d=e.role,f=e.onKeyDown,p=(0,o.Z)(e,C),v=(0,s.useReducer)((function(e){return!e}),!1)[1],h=(0,s.useRef)(!1),m=(0,s.useContext)(P),E=(0,s.useContext)(k);E&&(d=d||"tablist",u=E.activeKey,r=E.getControlledId,i=E.getControllerId);var A=(0,s.useRef)(null),_=function(e){var t=A.current;if(!t)return null;var r,n=(r="[data-rb-event-key]:not(.disabled)",g(t.querySelectorAll(r))),o=t.querySelector(".active");if(!o)return null;var i=n.indexOf(o);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},N=function(e,t){null!=e&&(l&&l(e,t),m&&m(e,t))};(0,s.useEffect)((function(){if(A.current&&h.current){var e=A.current.querySelector("[data-rb-event-key].active");e&&e.focus()}h.current=!1}));var M=b(t,A);return s.createElement(P.Provider,{value:N},s.createElement(y.Provider,{value:{role:d,activeKey:w(u),getControlledId:r||S,getControllerId:i||S}},s.createElement(c,(0,n.Z)({},p,{onKeyDown:function(e){var t;switch(f&&f(e),e.key){case"ArrowLeft":case"ArrowUp":t=_(-1);break;case"ArrowRight":case"ArrowDown":t=_(1);break;default:return}t&&(e.preventDefault(),N(t.dataset.rbEventKey,e),h.current=!0,v())},ref:M,role:d}))))}));var A=function(e){var t=(0,s.useRef)(e);return(0,s.useEffect)((function(){t.current=e}),[e]),t};var _=["active","className","eventKey","onSelect","onClick","as"],N=s.forwardRef((function(e,t){var r=e.active,i=e.className,c=e.eventKey,l=e.onSelect,u=e.onClick,d=e.as,f=(0,o.Z)(e,_),p=w(c,f.href),v=(0,s.useContext)(P),g=(0,s.useContext)(y),h=r;if(g){f.role||"tablist"!==g.role||(f.role="tab");var b=g.getControllerId(p),m=g.getControlledId(p);f["data-rb-event-key"]=p,f.id=b||f.id,f["aria-controls"]=m||f["aria-controls"],h=null==r&&null!=p?g.activeKey===p:r}"tab"===f.role&&(f.disabled&&(f.tabIndex=-1,f["aria-disabled"]=!0),f["aria-selected"]=h);var k=function(e){var t=A(e);return(0,s.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}((function(e){u&&u(e),null!=p&&(l&&l(p,e),v&&v(p,e))}));return s.createElement(d,(0,n.Z)({},f,{ref:t,onClick:k,className:a()(i,h&&"active")}))}));N.defaultProps={disabled:!1};var M=N,x=["bsPrefix","active","disabled","className","variant","action","as","onClick"],T={variant:void 0,active:!1,disabled:!1},O=s.forwardRef((function(e,t){var r=e.bsPrefix,i=e.active,c=e.disabled,l=e.className,u=e.variant,d=e.action,f=e.as,p=e.onClick,g=(0,o.Z)(e,x);r=(0,v.vE)(r,"list-group-item");var h=(0,s.useCallback)((function(e){if(c)return e.preventDefault(),void e.stopPropagation();p&&p(e)}),[c,p]);return c&&void 0===g.tabIndex&&(g.tabIndex=-1,g["aria-disabled"]=!0),s.createElement(M,(0,n.Z)({ref:t},g,{as:f||(d?g.href?"a":"button":"div"),onClick:h,className:a()(l,r,i&&"active",c&&"disabled",u&&r+"-"+u,d&&r+"-action")}))}));O.defaultProps=T,O.displayName="ListGroupItem";var D=O,K=["className","bsPrefix","variant","horizontal","as"],R={variant:void 0,horizontal:void 0},I=s.forwardRef((function(e,t){var r,i=u(e,{activeKey:"onSelect"}),c=i.className,l=i.bsPrefix,d=i.variant,f=i.horizontal,p=i.as,g=void 0===p?"div":p,h=(0,o.Z)(i,K),b=(0,v.vE)(l,"list-group");return r=f?!0===f?"horizontal":"horizontal-"+f:null,s.createElement(E,(0,n.Z)({ref:t},h,{as:g,className:a()(c,b,d&&b+"-"+d,r&&b+"-"+r)}))}));I.defaultProps=R,I.displayName="ListGroup",I.Item=D;var q=I},6792:function(e,t,r){"use strict";r.d(t,{vE:function(){return i}});var n=r(7294),o=n.createContext({});o.Consumer,o.Provider;function i(e,t){var r=(0,n.useContext)(o);return e||r[t]||t}},8837:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(7294),o=r(5697),i=r.n(o),a=r(1191);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.buildConfigFromProps=function(e){var t={events:{}};return Object.keys(o.propTypes).forEach((function(r){var n=e[r];if(void 0!==n){var o=r.match(/^on([A-Z]\S*)/);o?t.events[o[1].toLowerCase()]=n:t[r]=n}})),t},i.componentDidMount=function(){this.cg=(0,a.H)(this.el,this.buildConfigFromProps(this.props))},i.componentWillReceiveProps=function(e){this.cg.set(this.buildConfigFromProps(e))},i.componentWillUnmount=function(){this.cg.destroy()},i.render=function(){var e=this,t={style:s({},this.props.style)};return this.props.width&&(t.style.width=this.props.width),this.props.height&&(t.style.height=this.props.height),n.createElement("div",s({ref:function(t){return e.el=t}},t))},o}(n.Component);c(l,"propTypes",{width:i().oneOfType([i().string,i().number]),height:i().oneOfType([i().string,i().number]),fen:i().string,orientation:i().string,turnColor:i().string,check:i().string,lastMove:i().array,selected:i().string,coordinates:i().bool,autoCastle:i().bool,viewOnly:i().bool,disableContextMenu:i().bool,resizable:i().bool,addPieceZIndex:i().bool,highlight:i().object,animation:i().object,movable:i().object,premovable:i().object,predroppable:i().object,draggable:i().object,selectable:i().object,onChange:i().func,onMove:i().func,onDropNewPiece:i().func,onSelect:i().func,items:i().object,drawable:i().object}),c(l,"defaultProps",{coordinates:!0,resizable:!0,highlight:{lastMove:!0,check:!0}})},8831:function(e,t,r){e.exports=r(8837)},2473:function(e){"use strict";var t=function(){};e.exports=t},7901:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.anim=void 0;const n=r(687);function o(e,t){const r=e(t);return t.dom.redraw(),r}function i(e,t){return{key:e,pos:n.key2pos(e),piece:t}}function a(e,t){return t.sort((t,r)=>n.distanceSq(e.pos,t.pos)-n.distanceSq(e.pos,r.pos))[0]}t.anim=function(e,t){return t.animation.enabled?function(e,t){const r=new Map(t.pieces),o=e(t),s=function(e,t){const r=new Map,o=[],s=new Map,c=[],l=[],u=new Map;let d,f,p;for(const[n,a]of e)u.set(n,i(n,a));for(const a of n.allKeys)d=t.pieces.get(a),f=u.get(a),d?f?n.samePiece(d,f.piece)||(c.push(f),l.push(i(a,d))):l.push(i(a,d)):f&&c.push(f);for(const i of l)f=a(i,c.filter(e=>n.samePiece(i.piece,e.piece))),f&&(p=[f.pos[0]-i.pos[0],f.pos[1]-i.pos[1]],r.set(i.key,p.concat(p)),o.push(f.key));for(const n of c)o.includes(n.key)||s.set(n.key,n.piece);return{anims:r,fadings:s}}(r,t);if(s.anims.size||s.fadings.size){const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:s},e||function e(t,r){const n=t.animation.current;if(void 0===n)return void(t.dom.destroyed||t.dom.redrawNow());const o=1-(r-n.start)*n.frequency;if(o<=0)t.animation.current=void 0,t.dom.redrawNow();else{const r=(i=o)<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1;for(const e of n.plan.anims.values())e[2]=e[0]*r,e[3]=e[1]*r;t.dom.redrawNow(!0),requestAnimationFrame((r=performance.now())=>e(t,r))}var i}(t,performance.now())}else t.dom.redraw();return o}(e,t):o(e,t)},t.render=o},8955:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;const n=r(523),o=r(4660),i=r(7178),a=r(7901),s=r(8025),c=r(4038);t.start=function(e,t){function r(){n.toggleOrientation(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&r(),(t.fen?a.anim:a.render)(e=>i.configure(e,t),e)},state:e,getFen:()=>o.write(e.pieces),toggleOrientation:r,setPieces(t){a.anim(e=>n.setPieces(e,t),e)},selectSquare(t,r){t?a.anim(e=>n.selectSquare(e,t,r),e):e.selected&&(n.unselect(e),e.dom.redraw())},move(t,r){a.anim(e=>n.baseMove(e,t,r),e)},newPiece(t,r){a.anim(e=>n.baseNewPiece(e,t,r),e)},playPremove(){if(e.premovable.current){if(a.anim(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const r=n.playPredrop(e,t);return e.dom.redraw(),r}return!1},cancelPremove(){a.render(n.unsetPremove,e)},cancelPredrop(){a.render(n.unsetPredrop,e)},cancelMove(){a.render(e=>{n.cancelMove(e),s.cancel(e)},e)},stop(){a.render(e=>{n.stop(e),s.cancel(e)},e)},explode(t){c.explosion(e,t)},setAutoShapes(t){a.render(e=>e.drawable.autoShapes=t,e)},setShapes(t){a.render(e=>e.drawable.shapes=t,e)},getKeyAtDomPos:t=>n.getKeyAtDomPos(t,n.whitePov(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,r,n){s.dragNewPiece(e,t,r,n)},destroy(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whitePov=t.getSnappedKeyAtDomPos=t.getKeyAtDomPos=t.stop=t.cancelMove=t.playPredrop=t.playPremove=t.isDraggable=t.canMove=t.unselect=t.setSelected=t.selectSquare=t.dropNewPiece=t.userMove=t.baseNewPiece=t.baseMove=t.unsetPredrop=t.unsetPremove=t.setCheck=t.setPieces=t.reset=t.toggleOrientation=t.callUserFunction=void 0;const n=r(687),o=r(2420);function i(e,...t){e&&setTimeout(()=>e(...t),1)}function a(e){e.premovable.current&&(e.premovable.current=void 0,i(e.premovable.events.unset))}function s(e){const t=e.predroppable;t.current&&(t.current=void 0,i(t.events.unset))}function c(e,t,r){const o=e.pieces.get(t),a=e.pieces.get(r);if(t===r||!o)return!1;const s=a&&a.color!==o.color?a:void 0;return r===e.selected&&p(e),i(e.events.move,t,r,s),function(e,t,r){if(!e.autoCastle)return!1;const o=e.pieces.get(t);if(!o||"king"!==o.role)return!1;const i=n.key2pos(t),a=n.key2pos(r);if(0!==i[1]&&7!==i[1]||i[1]!==a[1])return!1;4!==i[0]||e.pieces.has(r)||(6===a[0]?r=n.pos2key([7,a[1]]):2===a[0]&&(r=n.pos2key([0,a[1]])));const s=e.pieces.get(r);return!(!s||s.color!==o.color||"rook"!==s.role)&&(e.pieces.delete(t),e.pieces.delete(r),i[0]<a[0]?(e.pieces.set(n.pos2key([6,a[1]]),o),e.pieces.set(n.pos2key([5,a[1]]),s)):(e.pieces.set(n.pos2key([2,a[1]]),o),e.pieces.set(n.pos2key([3,a[1]]),s)),!0)}(e,t,r)||(e.pieces.set(r,o),e.pieces.delete(t)),e.lastMove=[t,r],e.check=void 0,i(e.events.change),s||!0}function l(e,t,r,o){if(e.pieces.has(r)){if(!o)return!1;e.pieces.delete(r)}return i(e.events.dropNewPiece,t,r),e.pieces.set(r,t),e.lastMove=[r],e.check=void 0,i(e.events.change),e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),!0}function u(e,t,r){const o=c(e,t,r);return o&&(e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),e.animation.current=void 0),o}function d(e,t,r){if(g(e,t,r)){const n=u(e,t,r);if(n){const o=e.hold.stop();p(e);const a={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==n&&(a.captured=n),i(e.movable.events.after,t,r,a),!0}}else if(function(e,t,r){return t!==r&&h(e,t)&&o.premove(e.pieces,t,e.premovable.castle).includes(r)}(e,t,r))return function(e,t,r,n){s(e),e.premovable.current=[t,r],i(e.premovable.events.set,t,r,n)}(e,t,r,{ctrlKey:e.stats.ctrlKey}),p(e),!0;return p(e),!1}function f(e,t){e.selected=t,h(e,t)?e.premovable.dests=o.premove(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function p(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function v(e,t){const r=e.pieces.get(t);return!!r&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}function g(e,t,r){var n,o;return t!==r&&v(e,t)&&(e.movable.free||!!(null===(o=null===(n=e.movable.dests)||void 0===n?void 0:n.get(t))||void 0===o?void 0:o.includes(r)))}function h(e,t){const r=e.pieces.get(t);return!!r&&e.premovable.enabled&&e.movable.color===r.color&&e.turnColor!==r.color}function b(e){a(e),s(e),p(e)}t.callUserFunction=i,t.toggleOrientation=function(e){e.orientation=n.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},t.reset=function(e){e.lastMove=void 0,p(e),a(e),s(e)},t.setPieces=function(e,t){for(const[r,n]of t)n?e.pieces.set(r,n):e.pieces.delete(r)},t.setCheck=function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(const[r,n]of e.pieces)"king"===n.role&&n.color===t&&(e.check=r)},t.unsetPremove=a,t.unsetPredrop=s,t.baseMove=c,t.baseNewPiece=l,t.userMove=d,t.dropNewPiece=function(e,t,r,n){const o=e.pieces.get(t);o&&(function(e,t,r){const n=e.pieces.get(t);return!(!n||t!==r&&e.pieces.has(r)||"both"!==e.movable.color&&(e.movable.color!==n.color||e.turnColor!==n.color))}(e,t,r)||n)?(e.pieces.delete(t),l(e,o,r,n),i(e.movable.events.afterNewPiece,o.role,r,{premove:!1,predrop:!1})):o&&function(e,t,r){const n=e.pieces.get(t),o=e.pieces.get(r);return!!n&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==n.role||"1"!==r[1]&&"8"!==r[1])&&e.movable.color===n.color&&e.turnColor!==n.color}(e,t,r)?function(e,t,r){a(e),e.predroppable.current={role:t,key:r},i(e.predroppable.events.set,t,r)}(e,o.role,r):(a(e),s(e)),e.pieces.delete(t),p(e)},t.selectSquare=function(e,t,r){if(i(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return p(e),void e.hold.cancel();if((e.selectable.enabled||r)&&e.selected!==t&&d(e,e.selected,t))return void(e.stats.dragged=!1)}(v(e,t)||h(e,t))&&(f(e,t),e.hold.start())},t.setSelected=f,t.unselect=p,t.canMove=g,t.isDraggable=function(e,t){const r=e.pieces.get(t);return!!r&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===r.color&&(e.turnColor===r.color||e.premovable.enabled))},t.playPremove=function(e){const t=e.premovable.current;if(!t)return!1;const r=t[0],n=t[1];let o=!1;if(g(e,r,n)){const t=u(e,r,n);if(t){const a={premove:!0};!0!==t&&(a.captured=t),i(e.movable.events.after,r,n,a),o=!0}}return a(e),o},t.playPredrop=function(e,t){const r=e.predroppable.current;let n=!1;if(!r)return!1;if(t(r)){l(e,{role:r.role,color:e.movable.color},r.key)&&(i(e.movable.events.afterNewPiece,r.role,r.key,{premove:!1,predrop:!0}),n=!0)}return s(e),n},t.cancelMove=b,t.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,b(e)},t.getKeyAtDomPos=function(e,t,r){let o=Math.floor(8*(e[0]-r.left)/r.width);t||(o=7-o);let i=7-Math.floor(8*(e[1]-r.top)/r.height);return t||(i=7-i),o>=0&&o<8&&i>=0&&i<8?n.pos2key([o,i]):void 0},t.getSnappedKeyAtDomPos=function(e,t,r,i){const a=n.key2pos(e),s=n.allPos.filter(e=>o.queen(a[0],a[1],e[0],e[1])||o.knight(a[0],a[1],e[0],e[1])),c=s.map(e=>n.computeSquareCenter(n.pos2key(e),r,i)).map(e=>n.distanceSq(t,e)),[,l]=c.reduce((e,t,r)=>e[0]<t?e:[t,r],[c[0],0]);return n.pos2key(s[l])},t.whitePov=function(e){return"white"===e.orientation}},1191:function(e,t,r){"use strict";t.H=void 0;const n=r(8955),o=r(7178),i=r(9732),a=r(1644),s=r(3882),c=r(4722),l=r(1970),u=r(687);function d(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}t.H=function(e,t){const r=i.defaults();function f(){const t="dom"in r?r.dom.unbind:void 0,n=r.viewOnly&&!r.drawable.visible,o=a.renderWrap(e,r,n),i=u.memo(()=>o.board.getBoundingClientRect()),f=e=>{c.render(v),!e&&o.svg&&l.renderSvg(v,o.svg,o.customSvg)},p=()=>{i.clear(),c.updateBounds(v),o.svg&&l.renderSvg(v,o.svg,o.customSvg)},v=r;return v.dom={elements:o,bounds:i,redraw:d(f),redrawNow:f,unbind:t,relative:n},v.drawable.prevSvgHash="",f(!1),s.bindBoard(v,p),t||(v.dom.unbind=s.bindDocument(v,p)),v.events.insert&&v.events.insert(o),v}return o.configure(r,t||{}),n.start(f(),f)}},7178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;const n=r(523),o=r(4660);function i(e){return"object"==typeof e}t.configure=function(e,t){var r;if((null===(r=t.movable)||void 0===r?void 0:r.dests)&&(e.movable.dests=void 0),function e(t,r){for(const n in r)i(t[n])&&i(r[n])?e(t[n],r[n]):t[n]=r[n]}(e,t),t.fen&&(e.pieces=o.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&n.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&n.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?"1":"8",r="e"+t,n=e.movable.dests.get(r),o=e.pieces.get(r);if(!n||!o||"king"!==o.role)return;e.movable.dests.set(r,n.filter(e=>!(e==="a"+t&&n.includes("c"+t)||e==="h"+t&&n.includes("g"+t))))}}},8025:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancel=t.end=t.move=t.dragNewPiece=t.start=void 0;const n=r(523),o=r(687),i=r(5512),a=r(7901);function s(e){requestAnimationFrame(()=>{var t;const r=e.draggable.current;if(!r)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(r.orig))&&(e.animation.current=void 0);const n=e.pieces.get(r.orig);if(n&&o.samePiece(n,r.piece)){if(!r.started&&o.distanceSq(r.pos,r.origPos)>=Math.pow(e.draggable.distance,2)&&(r.started=!0),r.started){if("function"==typeof r.element){const e=r.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),r.element=e}const t=e.dom.bounds();o.translateAbs(r.element,[r.pos[0]-t.left-t.width/16,r.pos[1]-t.top-t.height/16])}}else c(e);s(e)})}function c(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,n.unselect(e),l(e),e.dom.redraw())}function l(e){const t=e.dom.elements;t.ghost&&o.setVisible(t.ghost,!1)}function u(e,t){let r=e.dom.elements.board.firstChild;for(;r;){if(r.cgKey===t&&"PIECE"===r.tagName)return r;r=r.nextSibling}}t.start=function(e,t){if(!t.isTrusted||void 0!==t.button&&0!==t.button)return;if(t.touches&&t.touches.length>1)return;const r=e.dom.bounds(),c=o.eventPosition(t),l=n.getKeyAtDomPos(c,n.whitePov(e),r);if(!l)return;const d=e.pieces.get(l),f=e.selected;f||!e.drawable.enabled||!e.drawable.eraseOnClick&&d&&d.color===e.turnColor||i.clear(e),!1===t.cancelable||t.touches&&e.movable.color&&!d&&!f&&!function(e,t){const r=n.whitePov(e),i=e.dom.bounds(),a=Math.pow(i.width/8,2);for(const n in e.pieces){const e=o.computeSquareCenter(n,r,i);if(o.distanceSq(e,t)<=a)return!0}return!1}(e,c)||t.preventDefault();const p=!!e.premovable.current,v=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,l)?a.anim(e=>n.selectSquare(e,l),e):n.selectSquare(e,l);const g=e.selected===l,h=u(e,l);if(d&&h&&g&&n.isDraggable(e,l)){e.draggable.current={orig:l,piece:d,origPos:c,pos:c,started:e.draggable.autoDistance&&e.stats.dragged,element:h,previouslySelected:f,originTarget:t.target},h.cgDragging=!0,h.classList.add("dragging");const i=e.dom.elements.ghost;i&&(i.className=`ghost ${d.color} ${d.role}`,o.translateAbs(i,o.posToTranslateAbs(r)(o.key2pos(l),n.whitePov(e))),o.setVisible(i,!0)),s(e)}else p&&n.unsetPremove(e),v&&n.unsetPredrop(e);e.dom.redraw()},t.dragNewPiece=function(e,t,r,n){e.pieces.set("a0",t),e.dom.redraw();const i=o.eventPosition(r);e.draggable.current={orig:"a0",piece:t,origPos:i,pos:i,started:!0,element:()=>u(e,"a0"),originTarget:r.target,newPiece:!0,force:!!n},s(e)},t.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=o.eventPosition(t))},t.end=function(e,t){const r=e.draggable.current;if(!r)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&r.originTarget!==t.target&&!r.newPiece)return void(e.draggable.current=void 0);n.unsetPremove(e),n.unsetPredrop(e);const i=o.eventPosition(t)||r.pos,a=n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds());a&&r.started&&r.orig!==a?r.newPiece?n.dropNewPiece(e,r.orig,a,r.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,r.orig,a)&&(e.stats.dragged=!0)):r.newPiece?e.pieces.delete(r.orig):e.draggable.deleteOnDropOff&&!a&&(e.pieces.delete(r.orig),n.callUserFunction(e.events.change)),(r.orig!==r.previouslySelected||r.orig!==a&&a)&&e.selectable.enabled||n.unselect(e),l(e),e.draggable.current=void 0,e.dom.redraw()},t.cancel=c},5512:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.cancel=t.end=t.move=t.processDraw=t.start=void 0;const n=r(523),o=r(687),i=["green","red","blue","yellow"];function a(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const r=n.getKeyAtDomPos(t.pos,n.whitePov(e),e.dom.bounds());r||(t.snapToValidMove=!1);const o=t.snapToValidMove?n.getSnappedKeyAtDomPos(t.orig,t.pos,n.whitePov(e),e.dom.bounds()):r;o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),a(e)}})}function s(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function c(e){var t;const r=(e.shiftKey||e.ctrlKey)&&o.isRightButton(e),n=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return i[(r?1:0)+(n?2:0)]}function l(e){e.onChange&&e.onChange(e.shapes)}t.start=function(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?n.unselect(e):n.cancelMove(e);const r=o.eventPosition(t),i=n.getKeyAtDomPos(r,n.whitePov(e),e.dom.bounds());i&&(e.drawable.current={orig:i,pos:r,brush:c(t),snapToValidMove:e.drawable.defaultSnapToValidMove},a(e))},t.processDraw=a,t.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=o.eventPosition(t))},t.end=function(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const r=e=>e.orig===t.orig&&e.dest===t.dest,n=e.shapes.find(r);n&&(e.shapes=e.shapes.filter(e=>!r(e)));n&&n.brush===t.brush||e.shapes.push(t);l(e)}(e.drawable,t),s(e))},t.cancel=s,t.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),l(e.drawable))}},7672:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drop=t.cancelDropMode=t.setDropMode=void 0;const n=r(523),o=r(687),i=r(8025);t.setDropMode=function(e,t){e.dropmode={active:!0,piece:t},i.cancel(e)},t.cancelDropMode=function(e){e.dropmode={active:!1}},t.drop=function(e,t){if(!e.dropmode.active)return;n.unsetPremove(e),n.unsetPredrop(e);const r=e.dropmode.piece;if(r){e.pieces.set("a0",r);const i=o.eventPosition(t),a=i&&n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds());a&&n.dropNewPiece(e,"a0",a)}e.dom.redraw()}},3882:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindDocument=t.bindBoard=void 0;const n=r(8025),o=r(5512),i=r(7672),a=r(687);function s(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function c(e,t,r){return n=>{e.drawable.current?e.drawable.enabled&&r(e,n):e.viewOnly||t(e,n)}}t.bindBoard=function(e,t){const r=e.dom.elements.board;if(!e.dom.relative&&e.resizable&&"ResizeObserver"in window){new window.ResizeObserver(t).observe(r)}if(e.viewOnly)return;const s=function(e){return t=>{e.draggable.current?n.cancel(e):e.drawable.current?o.cancel(e):t.shiftKey||a.isRightButton(t)?e.drawable.enabled&&o.start(e,t):e.viewOnly||(e.dropmode.active?i.drop(e,t):n.start(e,t))}}(e);r.addEventListener("touchstart",s,{passive:!1}),r.addEventListener("mousedown",s,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&r.addEventListener("contextmenu",e=>e.preventDefault())},t.bindDocument=function(e,t){const r=[];if(e.dom.relative||!e.resizable||"ResizeObserver"in window||r.push(s(document.body,"chessground.resize",t)),!e.viewOnly){const t=c(e,n.move,o.move),i=c(e,n.end,o.end);for(const e of["touchmove","mousemove"])r.push(s(document,e,t));for(const e of["touchend","mouseup"])r.push(s(document,e,i));const a=()=>e.dom.bounds.clear();r.push(s(document,"scroll",a,{capture:!0,passive:!0})),r.push(s(window,"resize",a,{passive:!0}))}return()=>r.forEach(e=>e())}},4038:function(e,t){"use strict";function r(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(t,"__esModule",{value:!0}),t.explosion=void 0,t.explosion=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{r(e,2),setTimeout(()=>r(e,void 0),120)},120)}},4660:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.write=t.read=t.initial=void 0;const n=r(687),o=r(9593);t.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";const i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},a={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};t.read=function(e){"start"===e&&(e=t.initial);const r=new Map;let o=7,a=0;for(const t of e)switch(t){case" ":return r;case"/":if(--o,o<0)return r;a=0;break;case"~":const e=r.get(n.pos2key([a,o]));e&&(e.promoted=!0);break;default:const s=t.charCodeAt(0);if(s<57)a+=s-48;else{const e=t.toLowerCase();r.set(n.pos2key([a,o]),{role:i[e],color:t===e?"black":"white"}),++a}}return r},t.write=function(e){return n.invRanks.map(t=>o.files.map(r=>{const n=e.get(r+t);if(n){const e=a[n.role];return"white"===n.color?e.toUpperCase():e}return"1"}).join("")).join("/").replace(/1{2,}/g,e=>e.length.toString())}},2420:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.premove=t.queen=t.knight=void 0;const n=r(687);function o(e,t){return Math.abs(e-t)}t.knight=(e,t,r,n)=>{const i=o(e,r),a=o(t,n);return 1===i&&2===a||2===i&&1===a};const i=(e,t,r,n)=>o(e,r)===o(t,n),a=(e,t,r,n)=>e===r||t===n;t.queen=(e,t,r,n)=>i(e,t,r,n)||a(e,t,r,n),t.premove=function(e,r,s){const c=e.get(r);if(!c)return[];const l=n.key2pos(r),u=c.role,d="pawn"===u?(f=c.color,(e,t,r,n)=>o(e,r)<2&&("white"===f?n===t+1||t<=1&&n===t+2&&e===r:n===t-1||t>=6&&n===t-2&&e===r)):"knight"===u?t.knight:"bishop"===u?i:"rook"===u?a:"queen"===u?t.queen:function(e,t,r){return(n,i,a,s)=>o(n,a)<2&&o(i,s)<2||r&&i===s&&i===("white"===e?0:7)&&(4===n&&(2===a&&t.includes(0)||6===a&&t.includes(7))||t.includes(a))}(c.color,function(e,t){const r="white"===t?"1":"8",o=[];for(const[i,a]of e)i[1]===r&&a.color===t&&"rook"===a.role&&o.push(n.key2pos(i)[0]);return o}(e,c.color),s);var f;return n.allPos.filter(e=>(l[0]!==e[0]||l[1]!==e[1])&&d(l[0],l[1],e[0],e[1])).map(n.pos2key)}},4722:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBounds=t.render=void 0;const n=r(687),o=r(523),i=r(687);function a(e){return"PIECE"===e.tagName}function s(e){return"SQUARE"===e.tagName}function c(e,t){for(const r of t)e.dom.elements.board.removeChild(r)}function l(e,t){let r=2+8*e[1]+(7-e[0]);return t&&(r=67-r),r+""}function u(e){return`${e.color} ${e.role}`}function d(e,t,r){const n=e.get(t);n?e.set(t,`${n} ${r}`):e.set(t,r)}function f(e,t,r){const n=e.get(t);n?n.push(r):e.set(t,[r])}t.render=function(e){const t=o.whitePov(e),r=e.dom.relative?i.posToTranslateRel:i.posToTranslateAbs(e.dom.bounds()),p=e.dom.relative?i.translateRel:i.translateAbs,v=e.dom.elements.board,g=e.pieces,h=e.animation.current,b=h?h.plan.anims:new Map,m=h?h.plan.fadings:new Map,y=e.draggable.current,w=function(e){var t;const r=new Map;if(e.lastMove&&e.highlight.lastMove)for(const i of e.lastMove)d(r,i,"last-move");e.check&&e.highlight.check&&d(r,e.check,"check");if(e.selected&&(d(r,e.selected,"selected"),e.movable.showDests)){const n=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(n)for(const t of n)d(r,t,"move-dest"+(e.pieces.has(t)?" oc":""));const o=e.premovable.dests;if(o)for(const t of o)d(r,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}const n=e.premovable.current;if(n)for(const i of n)d(r,i,"current-premove");else e.predroppable.current&&d(r,e.predroppable.current.key,"current-premove");const o=e.exploding;if(o)for(const i of o.keys)d(r,i,"exploding"+o.stage);return r}(e),P=new Set,k=new Set,C=new Map,S=new Map;let E,A,_,N,M,x,T,O,D,K;for(A=v.firstChild;A;){if(E=A.cgKey,a(A))if(_=g.get(E),M=b.get(E),x=m.get(E),N=A.cgPiece,!A.cgDragging||y&&y.orig===E||(A.classList.remove("dragging"),p(A,r(n.key2pos(E),t)),A.cgDragging=!1),!x&&A.cgFading&&(A.cgFading=!1,A.classList.remove("fading")),_){if(M&&A.cgAnimating&&N===u(_)){const e=n.key2pos(E);e[0]+=M[2],e[1]+=M[3],A.classList.add("anim"),p(A,r(e,t))}else A.cgAnimating&&(A.cgAnimating=!1,A.classList.remove("anim"),p(A,r(n.key2pos(E),t)),e.addPieceZIndex&&(A.style.zIndex=l(n.key2pos(E),t)));N!==u(_)||x&&A.cgFading?x&&N===u(x)?(A.classList.add("fading"),A.cgFading=!0):f(C,N,A):P.add(E)}else f(C,N,A);else if(s(A)){const e=A.className;w.get(E)===e?k.add(E):f(S,e,A)}A=A.nextSibling}for(const[o,i]of w)if(!k.has(o)){D=S.get(i),K=D&&D.pop();const e=r(n.key2pos(o),t);if(K)K.cgKey=o,p(K,e);else{const t=n.createEl("square",i);t.cgKey=o,p(t,e),v.insertBefore(t,v.firstChild)}}for(const[o,i]of g)if(M=b.get(o),!P.has(o))if(T=C.get(u(i)),O=T&&T.pop(),O){O.cgKey=o,O.cgFading&&(O.classList.remove("fading"),O.cgFading=!1);const i=n.key2pos(o);e.addPieceZIndex&&(O.style.zIndex=l(i,t)),M&&(O.cgAnimating=!0,O.classList.add("anim"),i[0]+=M[2],i[1]+=M[3]),p(O,r(i,t))}else{const a=u(i),s=n.createEl("piece",a),c=n.key2pos(o);s.cgPiece=a,s.cgKey=o,M&&(s.cgAnimating=!0,c[0]+=M[2],c[1]+=M[3]),p(s,r(c,t)),e.addPieceZIndex&&(s.style.zIndex=l(c,t)),v.appendChild(s)}for(const n of C.values())c(e,n);for(const n of S.values())c(e,n)},t.updateBounds=function(e){if(e.dom.relative)return;const t=o.whitePov(e),r=i.posToTranslateAbs(e.dom.bounds());let c=e.dom.elements.board.firstChild;for(;c;)(a(c)&&!c.cgAnimating||s(c))&&i.translateAbs(c,r(n.key2pos(c.cgKey),t)),c=c.nextSibling}},9732:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0;const n=r(4660),o=r(687);t.defaults=function(){return{pieces:n.read(n.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},1970:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAttributes=t.renderSvg=t.createElement=void 0;const n=r(687);function o(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i(e,t,r,n,o){const i=e.dom.bounds(),a=new Map,s=[];for(const l of t)a.set(l.hash,!1);let c,u=o.firstChild;for(;u;)c=u.getAttribute("cgHash"),a.has(c)?a.set(c,!0):s.push(u),u=u.nextSibling;for(const l of s)o.removeChild(l);for(const d of t)a.get(d.hash)||o.appendChild(l(e,d,r,n,i))}function a({orig:e,dest:t,brush:r,piece:n,modifiers:o,customSvg:i},a,l,u){return[u.width,u.height,l,e,t,r,t&&(a.get(t)||0)>1,n&&s(n),o&&(d=o,""+(d.lineWidth||"")),i&&c(i)].filter(e=>e).join(",");var d}function s(e){return[e.color,e.role,e.scale].filter(e=>e).join(",")}function c(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)>>>0;return"custom-"+t.toString()}function l(e,{shape:t,current:r,hash:i},a,s,c){let l;if(t.customSvg){const r=f(n.key2pos(t.orig),e.orientation);l=function(e,t,r){const{width:n,height:i}=r,a=n/8,s=i/8,c=t[0]*a,l=(7-t[1])*s,u=d(o("g"),{transform:`translate(${c},${l})`}),f=d(o("svg"),{width:a,height:s,viewBox:"0 0 100 100"});return u.appendChild(f),f.innerHTML=e,u}(t.customSvg,r,c)}else if(t.piece)l=function(e,t,r,n){const i=h(t,n),a=n.width/8*(r.scale||1),s=r.color[0]+("knight"===r.role?"n":r.role[0]).toUpperCase();return d(o("image"),{className:`${r.role} ${r.color}`,x:i[0]-a/2,y:i[1]-a/2,width:a,height:a,href:e+s+".svg"})}(e.drawable.pieces.baseUrl,f(n.key2pos(t.orig),e.orientation),t.piece,c);else{const i=f(n.key2pos(t.orig),e.orientation);if(t.dest){let u=a[t.brush];t.modifiers&&(u=p(u,t.modifiers)),l=function(e,t,r,n,i,a){const s=function(e,t){return(t?20:10)/512*e.width}(a,i&&!n),c=h(t,a),l=h(r,a),u=l[0]-c[0],f=l[1]-c[1],p=Math.atan2(f,u),b=Math.cos(p)*s,m=Math.sin(p)*s;return d(o("line"),{stroke:e.color,"stroke-width":v(e,n,a),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:g(e,n),x1:c[0],y1:c[1],x2:l[0]-b,y2:l[1]-m})}(u,i,f(n.key2pos(t.dest),e.orientation),r,(s.get(t.dest)||0)>1,c)}else l=function(e,t,r,n){const i=h(t,n),a=function(e){const t=e.width/512;return[3*t,4*t]}(n),s=(n.width+n.height)/32;return d(o("circle"),{stroke:e.color,"stroke-width":a[r?0:1],fill:"none",opacity:g(e,r),cx:i[0],cy:i[1],r:s-a[1]/2})}(a[t.brush],i,r,c)}return l.setAttribute("cgHash",i),l}function u(e){const t=d(o("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(d(o("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function d(e,t){for(const r in t)e.setAttribute(r,t[r]);return e}function f(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function p(e,t){return{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(e=>e).join("")}}function v(e,t,r){return(e.lineWidth||10)*(t?.85:1)/512*r.width}function g(e,t){return(e.opacity||1)*(t?.9:1)}function h(e,t){return[(e[0]+.5)*t.width/8,(7.5-e[1])*t.height/8]}t.createElement=o,t.renderSvg=function(e,t,r){const n=e.drawable,o=n.current,s=o&&o.mouseSq?o:void 0,c=new Map,l=e.dom.bounds();for(const i of n.shapes.concat(n.autoShapes).concat(s?[s]:[]))i.dest&&c.set(i.dest,(c.get(i.dest)||0)+1);const d=n.shapes.concat(n.autoShapes).map(e=>({shape:e,current:!1,hash:a(e,c,!1,l)}));s&&d.push({shape:s,current:!0,hash:a(s,c,!0,l)});const f=d.map(e=>e.hash).join(";");if(f===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=f;const v=t.querySelector("defs"),g=t.querySelector("g"),h=r.querySelector("g");!function(e,t,r){const n=new Map;let o;for(const s of t)s.shape.dest&&(o=e.brushes[s.shape.brush],s.shape.modifiers&&(o=p(o,s.shape.modifiers)),n.set(o.key,o));const i=new Set;let a=r.firstChild;for(;a;)i.add(a.getAttribute("cgKey")),a=a.nextSibling;for(const[s,c]of n.entries())i.has(s)||r.appendChild(u(c))}(n,d,v),i(e,d.filter(e=>!e.shape.customSvg),n.brushes,c,g),i(e,d.filter(e=>e.shape.customSvg),n.brushes,c,h)},t.setAttributes=d},9593:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ranks=t.files=t.colors=void 0,t.colors=["white","black"],t.files=["a","b","c","d","e","f","g","h"],t.ranks=["1","2","3","4","5","6","7","8"]},687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeSquareCenter=t.createEl=t.isRightButton=t.eventPosition=t.setVisible=t.translateRel=t.translateAbs=t.posToTranslateRel=t.posToTranslateAbs=t.samePiece=t.distanceSq=t.opposite=t.timer=t.memo=t.allPos=t.key2pos=t.pos2key=t.allKeys=t.invRanks=void 0;const n=r(9593);t.invRanks=[...n.ranks].reverse(),t.allKeys=Array.prototype.concat(...n.files.map(e=>n.ranks.map(t=>e+t)));t.pos2key=e=>t.allKeys[8*e[0]+e[1]];t.key2pos=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],t.allPos=t.allKeys.map(t.key2pos),t.memo=function(e){let t;const r=()=>(void 0===t&&(t=e()),t);return r.clear=()=>{t=void 0},r};t.timer=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}};t.opposite=e=>"white"===e?"black":"white";t.distanceSq=(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n};t.samePiece=(e,t)=>e.role===t.role&&e.color===t.color;const o=(e,t,r,n)=>[(t?e[0]:7-e[0])*r,(t?7-e[1]:e[1])*n];t.posToTranslateAbs=e=>{const t=e.width/8,r=e.height/8;return(e,n)=>o(e,n,t,r)};t.posToTranslateRel=(e,t)=>o(e,t,100,100);t.translateAbs=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`};t.translateRel=(e,t)=>{e.style.transform=`translate(${t[0]}%,${t[1]}%)`};t.setVisible=(e,t)=>{e.style.visibility=t?"visible":"hidden"};t.eventPosition=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0};t.isRightButton=e=>2===e.buttons||2===e.button;t.createEl=(e,t)=>{const r=document.createElement(e);return t&&(r.className=t),r},t.computeSquareCenter=function(e,r,n){const o=t.key2pos(e);return r||(o[0]=7-o[0],o[1]=7-o[1]),[n.left+n.width*o[0]/8+n.width/16,n.top+n.height*(7-o[1])/8+n.height/16]}},1644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderWrap=void 0;const n=r(687),o=r(9593),i=r(1970);function a(e,t){const r=n.createEl("coords",t);let o;for(const i of e)o=n.createEl("coord"),o.textContent=i,r.appendChild(o);return r}t.renderWrap=function(e,t,r){e.innerHTML="",e.classList.add("cg-wrap");for(const n of o.colors)e.classList.toggle("orientation-"+n,t.orientation===n);e.classList.toggle("manipulable",!t.viewOnly);const s=n.createEl("cg-helper");e.appendChild(s);const c=n.createEl("cg-container");s.appendChild(c);const l=n.createEl("cg-board");let u,d,f;if(c.appendChild(l),t.drawable.visible&&!r&&(u=i.setAttributes(i.createElement("svg"),{class:"cg-shapes"}),u.appendChild(i.createElement("defs")),u.appendChild(i.createElement("g")),d=i.setAttributes(i.createElement("svg"),{class:"cg-custom-svgs"}),d.appendChild(i.createElement("g")),c.appendChild(u),c.appendChild(d)),t.coordinates){const e="black"===t.orientation?" black":"";c.appendChild(a(o.ranks,"ranks"+e)),c.appendChild(a(o.files,"files"+e))}return t.draggable.showGhost&&!r&&(f=n.createEl("piece","ghost"),n.setVisible(f,!1),c.appendChild(f)),{board:l,container:c,ghost:f,svg:u,customSvg:d}}}}]);